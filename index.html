
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>PSCalib documentation &#8212; PSCalib-doc 1 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="#">PSCalib-doc 1 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pscalib-documentation">
<h1>PSCalib documentation<a class="headerlink" href="#pscalib-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-GeometryObject"></span><div class="section" id="class-geometryobject-is-a-building-block-for-hierarchical-geometry">
<h2>Class <a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a> is a building block for hierarchical geometry<a class="headerlink" href="#class-geometryobject-is-a-building-block-for-hierarchical-geometry" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Methods of this class are used internally in :py:class:`GeometryAccess`</span>
<span class="c1"># and are not supposed to be used directly...</span>

<span class="kn">from</span> <span class="nn">PSCalib.GeometryObject</span> <span class="k">import</span> <span class="n">GeometryObject</span>

<span class="c1"># Instatiation of the geometry object</span>
<span class="c1"># d = &lt;dictionary-of-input-parameters&gt;</span>
<span class="n">geo</span> <span class="o">=</span> <span class="n">GeometryObject</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># test print methods:</span>
<span class="n">geo</span><span class="o">.</span><span class="n">print_geo</span><span class="p">()</span>
<span class="n">geo</span><span class="o">.</span><span class="n">print_geo_children</span><span class="p">()</span>

<span class="c1"># modification methods:</span>
<span class="n">geo</span><span class="o">.</span><span class="n">set_geo_pars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">rot_z</span><span class="p">,</span> <span class="n">rot_y</span><span class="p">,</span> <span class="n">rot_x</span><span class="p">,</span> <span class="n">tilt_z</span><span class="p">,</span> <span class="n">tilt_y</span><span class="p">,</span> <span class="n">tilt_x</span><span class="p">)</span>
<span class="n">geo</span><span class="o">.</span><span class="n">move_geo</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">)</span>
<span class="n">geo</span><span class="o">.</span><span class="n">tilt_geo</span><span class="p">(</span><span class="n">dt_x</span><span class="p">,</span> <span class="n">dt_y</span><span class="p">,</span> <span class="n">dt_z</span><span class="p">)</span>

<span class="c1"># access methods:</span>
<span class="n">s</span>      <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">str_data</span><span class="p">()</span>
<span class="n">parent</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
<span class="n">list_of_children</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_list_of_children</span><span class="p">()</span>
<span class="n">oname</span>  <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_geo_name</span><span class="p">()</span>
<span class="n">oindex</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_geo_index</span><span class="p">()</span>
<span class="n">pname</span>  <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_parent_name</span><span class="p">()</span>
<span class="n">pindex</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_parent_index</span><span class="p">()</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span>  <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_pixel_coords</span><span class="p">(</span><span class="n">do_tilt</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span>    <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_2d_pixel_coords</span><span class="p">(</span><span class="n">do_tilt</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
<span class="n">area</span>   <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_pixel_area</span><span class="p">()</span>
<span class="c1">#mbits = +1-edges, +2-wide pixels, +4-non-bonded pixels, +8/+16 - four/eight neighbours of non-bonded</span>
<span class="n">mask</span>   <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_pixel_mask</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">npixels</span><span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_size_geo_array</span><span class="p">()</span>
<span class="n">pixsize</span><span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_pixel_scale_size</span><span class="p">()</span>
<span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">z0</span>             <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_origin</span><span class="p">()</span>
<span class="n">rot_z</span><span class="p">,</span> <span class="n">rot_y</span><span class="p">,</span> <span class="n">rot_x</span>    <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_rot</span><span class="p">()</span>
<span class="n">tilt_z</span><span class="p">,</span> <span class="n">tilt_y</span><span class="p">,</span> <span class="n">tilt_x</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">get_tilt</span><span class="p">()</span>

<span class="c1"># private methods for internal consumption:</span>
<span class="n">geo</span><span class="o">.</span><span class="n">set_parent</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
<span class="n">geo</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
<span class="n">Xt</span><span class="p">,</span> <span class="n">Yt</span><span class="p">,</span> <span class="n">Zt</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">transform_geo_coord_arrays</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Xt</span><span class="p">,</span> <span class="n">Yt</span>     <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">transform_2d_geo_coord_arrays</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># global methods:</span>
<span class="n">Xrot</span><span class="p">,</span> <span class="n">Yrot</span> <span class="o">=</span> <span class="n">rotation_cs</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
<span class="n">Xrot</span><span class="p">,</span> <span class="n">Yrot</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">angle_deg</span><span class="p">)</span>

<span class="c1"># global methods only for CSPAD2x2 array conversion between (2,185,388) and (185,388,2):</span>
<span class="n">arrTwo2x1</span> <span class="o">=</span> <span class="n">data2x2ToTwo2x1</span><span class="p">(</span><span class="n">asData2x2</span><span class="p">)</span>
<span class="n">asData2x2</span> <span class="o">=</span> <span class="n">two2x1ToData2x2</span><span class="p">(</span><span class="n">arrTwo2x1</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#module-GeometryAccess" title="GeometryAccess"><code class="xref py py-class docutils literal"><span class="pre">GeometryAccess</span></code></a></p>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="function">
<dt id="GeometryObject.data2x2ToTwo2x1">
<code class="descclassname">GeometryObject.</code><code class="descname">data2x2ToTwo2x1</code><span class="sig-paren">(</span><em>arr2x2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryObject.html#data2x2ToTwo2x1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryObject.data2x2ToTwo2x1" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts array shaped as CSPAD2x2 data (185,388,2)
to two 2x1 arrays with shape=(2,185,388)</p>
</dd></dl>

<dl class="function">
<dt id="GeometryObject.rotation">
<code class="descclassname">GeometryObject.</code><code class="descname">rotation</code><span class="sig-paren">(</span><em>X</em>, <em>Y</em>, <em>angle_deg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryObject.html#rotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryObject.rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>For numpy arrays X and Y returns the numpy arrays of Xrot and Yrot rotated by angle_deg</p>
</dd></dl>

<dl class="function">
<dt id="GeometryObject.rotation_cs">
<code class="descclassname">GeometryObject.</code><code class="descname">rotation_cs</code><span class="sig-paren">(</span><em>X</em>, <em>Y</em>, <em>C</em>, <em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryObject.html#rotation_cs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryObject.rotation_cs" title="Permalink to this definition">¶</a></dt>
<dd><p>For numpy arrays X and Y returns the numpy arrays of Xrot and Yrot</p>
</dd></dl>

<dl class="function">
<dt id="GeometryObject.two2x1ToData2x2">
<code class="descclassname">GeometryObject.</code><code class="descname">two2x1ToData2x2</code><span class="sig-paren">(</span><em>arrTwo2x1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryObject.html#two2x1ToData2x2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryObject.two2x1ToData2x2" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts array shaped as two 2x1 arrays (2,185,388) or (2*185,388)
to CSPAD2x2 data shape=(185,388,2)</p>
</dd></dl>

</div>
<span class="target" id="module-GeometryAccess"></span><div class="section" id="class-geometryaccess-holds-and-access-hierarchical-geometry-for-generic-pixel-detector">
<h2>Class <a class="reference internal" href="#module-GeometryAccess" title="GeometryAccess"><code class="xref py py-class docutils literal"><span class="pre">GeometryAccess</span></code></a> - holds and access hierarchical geometry for generic pixel detector<a class="headerlink" href="#class-geometryaccess-holds-and-access-hierarchical-geometry-for-generic-pixel-detector" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PSCalib.GeometryAccess</span> <span class="k">import</span> <span class="n">GeometryAccess</span><span class="p">,</span> <span class="n">img_from_pixel_arrays</span>

<span class="n">fname_geometry</span> <span class="o">=</span> <span class="s1">&#39;/reg/d/psdm/CXI/cxitut13/calib/CsPad::CalibV1/CxiDs1.0:Cspad.0/geometry/0-end.data&#39;</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">GeometryAccess</span><span class="p">(</span><span class="n">fname_geometry</span><span class="p">,</span> <span class="mi">0377</span><span class="p">)</span>

<span class="c1"># load constants from geometry file</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">load_pars_from_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># load constants from next-line-symbol separated str / text object</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">load_pars_from_str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="c1"># check if geometry info is available, returns bool</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>

<span class="c1"># get pixel coordinate [um] arrays</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_coords</span><span class="p">(</span><span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># get pixel x,y coordinate [um] arrays projected toward origin on specified zplane, if zplane=None then zplane=Z.mean()</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_xy_at_z</span><span class="p">(</span><span class="n">zplane</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># print a portion of pixel X, Y, and Z coordinate arrays</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">print_pixel_coords</span><span class="p">(</span><span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># get pixel area array; A=1 for regular pixels, =2.5 for wide.</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_areas</span><span class="p">(</span><span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># returns (smallest) pixel size [um]</span>
<span class="n">pixel_size</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_scale_size</span><span class="p">(</span><span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># returns dictionary of comments associated with geometry (file)</span>
<span class="n">dict_of_comments</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_dict_of_comments</span><span class="p">()</span>

<span class="c1"># print comments associated with geometry (file) </span>
<span class="n">geometry</span><span class="o">.</span><span class="n">print_comments_from_dict</span><span class="p">()</span>

<span class="c1"># print list of geometry objects</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">print_list_of_geos</span><span class="p">()</span>

<span class="c1"># print list of geometry object children</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">print_list_of_geos_children</span><span class="p">()</span>

<span class="c1"># get pixel mask array;</span>
<span class="c1"># mbits = +1-mask edges, +2-wide pixels, +4-non-bonded pixels, +8/+16 - four/eight neighbours of non-bonded</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_mask</span><span class="p">(</span><span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>

<span class="c1"># get index arrays for entire detector</span>
<span class="n">iX</span><span class="p">,</span> <span class="n">iY</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_coord_indexes</span><span class="p">(</span><span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># get index arrays for specified quad with offset</span>
<span class="n">iX</span><span class="p">,</span> <span class="n">iY</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_coord_indexes</span><span class="p">(</span><span class="s1">&#39;QUAD:V1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># get index arrays for pixel coordinates projected toward origin on specified zplane</span>
<span class="n">iX</span><span class="p">,</span> <span class="n">iY</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_pixel_xy_inds_at_z</span><span class="p">(</span><span class="n">zplane</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">oindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># get ix and iy indexes for specified point in [um]. By default p_um=(0,0) - detector origin coordinates (center).</span>
<span class="n">ix</span><span class="p">,</span> <span class="n">iy</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">point_coord_indexes</span><span class="p">(</span><span class="n">p_um</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="c1"># all other parameters should be the same as in get_pixel_coord_indexes method</span>
<span class="n">ix</span><span class="p">,</span> <span class="n">iy</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">point_coord_indexes</span><span class="p">(</span><span class="n">p_um</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;QUAD:V1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pix_scale_size_um</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy0_off_pix</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">do_tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># get 2-d image from index arrays</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">img_from_pixel_arrays</span><span class="p">(</span><span class="n">iX</span><span class="p">,</span><span class="n">iY</span><span class="p">,</span><span class="n">W</span><span class="o">=</span><span class="n">arr</span><span class="p">)</span>

<span class="c1"># Get specified object of the class GeometryObject, all objects are kept in the list self.list_of_geos</span>
<span class="n">geo</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_geo</span><span class="p">(</span><span class="s1">&#39;QUAD:V1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> 
<span class="c1"># Get top GeometryObject - the object which includes all other geometry objects</span>
<span class="n">geo</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_top_geo</span><span class="p">()</span>

<span class="c1"># modify currect geometry objects&#39; parameters</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">set_geo_pars</span><span class="p">(</span><span class="s1">&#39;QUAD:V1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">rot_z</span><span class="p">,</span> <span class="n">rot_y</span><span class="p">,</span> <span class="n">rot_x</span><span class="p">,</span> <span class="n">tilt_z</span><span class="p">,</span> <span class="n">tilt_y</span><span class="p">,</span> <span class="n">tilt_x</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">move_geo</span><span class="p">(</span><span class="s1">&#39;QUAD:V1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">tilt_geo</span><span class="p">(</span><span class="s1">&#39;QUAD:V1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># save current geometry parameters in file</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">save_pars_in_file</span><span class="p">(</span><span class="n">fname_geometry_new</span><span class="p">)</span>

<span class="c1"># change verbosity bit-control word; to print everythisg use pbits = 0xffff</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">set_print_bits</span><span class="p">(</span><span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># return geometry parameters in &quot;psf&quot; format as a tuple psf[32][3][3]</span>
<span class="n">psf</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get_psf</span><span class="p">()</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">print_psf</span><span class="p">()</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="class">
<dt id="GeometryAccess.GeometryAccess">
<em class="property">class </em><code class="descclassname">GeometryAccess.</code><code class="descname">GeometryAccess</code><span class="sig-paren">(</span><em>path=None</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#module-GeometryAccess" title="GeometryAccess"><code class="xref py py-class docutils literal"><span class="pre">GeometryAccess</span></code></a></p>
<dl class="method">
<dt id="GeometryAccess.GeometryAccess.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>path=None</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor of the class <a class="reference internal" href="#module-GeometryAccess" title="GeometryAccess"><code class="xref py py-class docutils literal"><span class="pre">GeometryAccess</span></code></a></p>
<p>Parameters</p>
<ul class="simple">
<li>path : str - path to the geometry file</li>
<li>pbits : int - verbosity bitword</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_dict_of_comments">
<code class="descname">get_dict_of_comments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_dict_of_comments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_dict_of_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dictionary of comments</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_geo">
<code class="descname">get_geo</code><span class="sig-paren">(</span><em>oname</em>, <em>oindex</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns specified geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_areas">
<code class="descname">get_pixel_areas</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_areas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_areas" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel areas array for top or specified geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_coord_indexes">
<code class="descname">get_pixel_coord_indexes</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_tilt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_coord_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_coord_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns two pixel X,Y coordinate index arrays for top or specified geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_coords">
<code class="descname">get_pixel_coords</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em>, <em>do_tilt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns three pixel X,Y,Z coordinate arrays for top or specified geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_mask">
<code class="descname">get_pixel_mask</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em>, <em>mbits=255</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel mask array for top or specified geometry object.</p>
<dl class="docutils">
<dt>mbits =+1 - mask edges</dt>
<dd>+2 - two wide-pixel central columns
+4 - non-bonded pixels
+8 - four nearest neighbours of non-bonded pixels
+16- eight neighbours of non-bonded pixels</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_scale_size">
<code class="descname">get_pixel_scale_size</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_scale_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_scale_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel scale size for top or specified geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_xy_at_z">
<code class="descname">get_pixel_xy_at_z</code><span class="sig-paren">(</span><em>zplane=None</em>, <em>oname=None</em>, <em>oindex=0</em>, <em>do_tilt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_xy_at_z"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_xy_at_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel coordinate arrays XatZ, YatZ, for specified zplane and geometry object.</p>
<p>This method projects pixel X, Y coordinates in 3-D
on the specified Z plane along direction to origin.</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_pixel_xy_inds_at_z">
<code class="descname">get_pixel_xy_inds_at_z</code><span class="sig-paren">(</span><em>zplane=None</em>, <em>oname=None</em>, <em>oindex=0</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_tilt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_pixel_xy_inds_at_z"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_pixel_xy_inds_at_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel coordinate index arrays iX, iY of size for specified zplane and geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_psf">
<code class="descname">get_psf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_psf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_psf" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array of vectors in TJ format (psf stands for position-slow-fast vectors)</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.get_top_geo">
<code class="descname">get_top_geo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.get_top_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.get_top_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns top geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.is_valid">
<code class="descname">is_valid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.is_valid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>returns True if geometry is loaded and presumably valid, otherwise False</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.load_pars_from_file">
<code class="descname">load_pars_from_file</code><span class="sig-paren">(</span><em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.load_pars_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.load_pars_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads input “geometry” file, discards empty lines and comments, fills the list of geometry objects for data lines</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.load_pars_from_str">
<code class="descname">load_pars_from_str</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.load_pars_from_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.load_pars_from_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads input geometry from str, discards empty lines and comments, fills the list of geometry objects for data lines</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.move_geo">
<code class="descname">move_geo</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em>, <em>dx=0</em>, <em>dy=0</em>, <em>dz=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.move_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.move_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves specified or top geometry object by dx, dy, dz</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.point_coord_indexes">
<code class="descname">point_coord_indexes</code><span class="sig-paren">(</span><em>p_um=(0</em>, <em>0)</em>, <em>oname=None</em>, <em>oindex=0</em>, <em>pix_scale_size_um=None</em>, <em>xy0_off_pix=None</em>, <em>do_tilt=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.point_coord_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.point_coord_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts point (x_um, y_um) corrdinates [um] to pixel (ix, iy) indexes.
All other parameters are the same as in get_pixel_coord_indexes.
WARNING: indexes are not required to be inside the image. They are integer, may be negative or exceed pixel maximal index.</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.print_pixel_coords">
<code class="descname">print_pixel_coords</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.print_pixel_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.print_pixel_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Partial print of pixel coordinate X,Y,Z arrays for selected or top(by default) geo</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.print_psf">
<code class="descname">print_psf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.print_psf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.print_psf" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets and prints psf array for test purpose</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.save_pars_in_file">
<code class="descname">save_pars_in_file</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.save_pars_in_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.save_pars_in_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Save geometry file with current content</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.set_geo_pars">
<code class="descname">set_geo_pars</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em>, <em>x0=0</em>, <em>y0=0</em>, <em>z0=0</em>, <em>rot_z=0</em>, <em>rot_y=0</em>, <em>rot_x=0</em>, <em>tilt_z=0</em>, <em>tilt_y=0</em>, <em>tilt_x=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.set_geo_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.set_geo_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets geometry parameters for specified or top geometry object</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.set_print_bits">
<code class="descname">set_print_bits</code><span class="sig-paren">(</span><em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.set_print_bits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.set_print_bits" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets printout control bitword</p>
</dd></dl>

<dl class="method">
<dt id="GeometryAccess.GeometryAccess.tilt_geo">
<code class="descname">tilt_geo</code><span class="sig-paren">(</span><em>oname=None</em>, <em>oindex=0</em>, <em>dt_x=0</em>, <em>dt_y=0</em>, <em>dt_z=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#GeometryAccess.tilt_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.GeometryAccess.tilt_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Tilts specified or top geometry object by dt_x, dt_y, dt_z</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="GeometryAccess.divide_protected">
<code class="descclassname">GeometryAccess.</code><code class="descname">divide_protected</code><span class="sig-paren">(</span><em>num</em>, <em>den</em>, <em>vsub_zero=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#divide_protected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.divide_protected" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns result of devision of numpy arrays num/den with substitution of value vsub_zero for zero den elements.</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.img_default">
<code class="descclassname">GeometryAccess.</code><code class="descname">img_default</code><span class="sig-paren">(</span><em>shape=(10</em>, <em>10)</em>, <em>dtype=&lt;type 'numpy.float32'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#img_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.img_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns default image</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.img_from_pixel_arrays">
<code class="descclassname">GeometryAccess.</code><code class="descname">img_from_pixel_arrays</code><span class="sig-paren">(</span><em>iX</em>, <em>iY</em>, <em>W=None</em>, <em>dtype=&lt;type 'numpy.float32'&gt;</em>, <em>vbase=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#img_from_pixel_arrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.img_from_pixel_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns image from iX, iY coordinate index arrays and associated weights W.</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_access">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_access</code><span class="sig-paren">(</span><em>geometry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests geometry acess methods of the class GeometryAccess</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_cspad2x2">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_cspad2x2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_cspad2x2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_cspad2x2" title="Permalink to this definition">¶</a></dt>
<dd><p>Test cspad2x2 geometry table</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_cspad_xy_at_z">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_cspad_xy_at_z</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_cspad_xy_at_z"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_cspad_xy_at_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Test cspad geometry table</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_epix100a">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_epix100a</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_epix100a"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_epix100a" title="Permalink to this definition">¶</a></dt>
<dd><p>Test test_epix100a geometry table</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_img_default">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_img_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_img_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_img_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Test default image</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_load_pars_from_file">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_load_pars_from_file</code><span class="sig-paren">(</span><em>geometry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_load_pars_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_load_pars_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Test default image</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_mask_quad">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_mask_quad</code><span class="sig-paren">(</span><em>geometry</em>, <em>mbits</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_mask_quad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_mask_quad" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests geometry acess methods of the class GeometryAccess object for CSPAD quad</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_plot_cspad">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_plot_cspad</code><span class="sig-paren">(</span><em>geometry</em>, <em>fname_data</em>, <em>amp_range=(0</em>, <em>0.5)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_plot_cspad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_plot_cspad" title="Permalink to this definition">¶</a></dt>
<dd><p>The same test as previous, but use get_pixel_coord_indexes(…) method</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_plot_quad">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_plot_quad</code><span class="sig-paren">(</span><em>geometry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_plot_quad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_plot_quad" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests geometry acess methods of the class GeometryAccess object for CSPAD quad</p>
</dd></dl>

<dl class="function">
<dt id="GeometryAccess.test_save_pars_in_file">
<code class="descclassname">GeometryAccess.</code><code class="descname">test_save_pars_in_file</code><span class="sig-paren">(</span><em>geometry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GeometryAccess.html#test_save_pars_in_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GeometryAccess.test_save_pars_in_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Test default image</p>
</dd></dl>

</div>
<span class="target" id="module-SegGeometryStore"></span><div class="section" id="class-seggeometrystore-is-a-factory-class-method">
<h2>Class <a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a> is a factory class/method<a class="headerlink" href="#class-seggeometrystore-is-a-factory-class-method" title="Permalink to this headline">¶</a></h2>
<p>Switches between different device-dependent segments/sensors
to access their pixel geometry using <a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a> interface.</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PSCalib.SegGeometryStore</span> <span class="k">import</span> <span class="n">sgs</span>

<span class="n">sg</span> <span class="o">=</span> <span class="n">sgs</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s1">&#39;SENS2X1:V1&#39;</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">sg2</span><span class="o">=</span> <span class="n">sgs</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s1">&#39;EPIX100:V1&#39;</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">sg3</span><span class="o">=</span> <span class="n">sgs</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s1">&#39;PNCCD:V1&#39;</span><span class="p">,</span>   <span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">sg4</span><span class="o">=</span> <span class="n">sgs</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s1">&#39;ANDOR3D:V1&#39;</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">sg5</span><span class="o">=</span> <span class="n">sgs</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s1">&#39;JUNGFRAU:V1&#39;</span><span class="p">,</span><span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>

<span class="n">sg</span><span class="o">.</span><span class="n">print_seg_info</span><span class="p">(</span><span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">size_arr</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">rows</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">rows</span><span class="p">()</span>
<span class="n">cols</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">cols</span><span class="p">()</span>
<span class="n">shape</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">shape</span><span class="p">()</span>
<span class="n">pix_size</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_scale_size</span><span class="p">()</span>
<span class="n">area</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_area_array</span><span class="p">()</span>
<span class="n">mask</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_mask</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>    
<span class="n">sizeX</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">sizeX</span><span class="p">,</span> <span class="n">sizeY</span><span class="p">,</span> <span class="n">sizeZ</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">()</span>
<span class="n">X</span>        <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">()</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">()</span>
<span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_mas</span><span class="p">()</span>
<span class="o">...</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryJungfrauV1" title="SegGeometryJungfrauV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryJungfrauV1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2013-03-08 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="SegGeometryStore.SegGeometryStore">
<em class="property">class </em><code class="descclassname">SegGeometryStore.</code><code class="descname">SegGeometryStore</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryStore.html#SegGeometryStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryStore.SegGeometryStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory class for SegGeometry-base objects of different detectors</p>
<dl class="method">
<dt id="SegGeometryStore.SegGeometryStore.Create">
<code class="descname">Create</code><span class="sig-paren">(</span><em>sp</em>, <em>segname='SENS2X1:V1'</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryStore.html#SegGeometryStore.Create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryStore.SegGeometryStore.Create" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method returns device dependent SINGLETON object with interface implementation</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-SegGeometry"></span><div class="section" id="seggeometry-abstract-class-with-interface-description">
<h2><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a> - abstract class with interface description<a class="headerlink" href="#seggeometry-abstract-class-with-interface-description" title="Permalink to this headline">¶</a></h2>
<p>Methods of this class should be re-implemented in derived classes with name pattern SegGeometry&lt;SensorVers&gt; 
for pixel geometry description of all sensors.
For example, CSPAD 2x1 sensor is implemented in class <code class="xref py py-class docutils literal"><span class="pre">PSCalib.SegGeometryCspad2x1V1</span></code>.
Access to all implemented sensors is available through the factory method in class <code class="xref py py-class docutils literal"><span class="pre">PSCalib.SegGeometryStore</span></code>.</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SegGeometryCspad2x1V1</span> <span class="k">import</span> <span class="n">cspad2x1_one</span> <span class="k">as</span> <span class="n">sg</span>

<span class="n">sg</span><span class="o">.</span><span class="n">print_seg_info</span><span class="p">(</span><span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="n">size_arr</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">rows</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">rows</span><span class="p">()</span>
<span class="n">cols</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">cols</span><span class="p">()</span>
<span class="n">shape</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">shape</span><span class="p">()</span>
<span class="n">pix_size</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_scale_size</span><span class="p">()</span>
<span class="n">area</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_area_array</span><span class="p">()</span>
<span class="n">mask</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_mask</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>    
<span class="n">sizeX</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">sizeX</span><span class="p">,</span> <span class="n">sizeY</span><span class="p">,</span> <span class="n">sizeZ</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">()</span>
<span class="n">X</span>        <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">()</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">()</span>
<span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_mas</span><span class="p">()</span>
<span class="o">...</span>
<span class="nb">print</span> <span class="s1">&#39;X.shape =&#39;</span><span class="p">,</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="function">
<dt id="SegGeometry.rotation">
<code class="descclassname">SegGeometry.</code><code class="descname">rotation</code><span class="sig-paren">(</span><em>X</em>, <em>Y</em>, <em>C</em>, <em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometry.html#rotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometry.rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>For numpy arrays X and Y returns the numpy arrays of Xrot and Yrot</p>
</dd></dl>

</div>
<span class="target" id="module-SegGeometryCspad2x1V1"></span><div class="section" id="class-seggeometrycspad2x1v1-describes-the-cspad-2x1-v1-sensor-geometry">
<h2>Class <a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a> describes the CSPAD 2x1 V1 sensor geometry<a class="headerlink" href="#class-seggeometrycspad2x1v1-describes-the-cspad-2x1-v1-sensor-geometry" title="Permalink to this headline">¶</a></h2>
<p>In this class we use natural matrix notations like in data array
(that is different from the DAQ notations where rows and cols are swapped).</p>
<blockquote>
<div><p>We assume that</p>
<ul class="simple">
<li>2x1 has 185 rows and 388 columns,</li>
<li>X-Y coordinate system origin is in the sensor center,</li>
<li>pixel (r,c)=(0,0) is in the top left corner of the matrix, has coordinates (xmin,ymax), as shown below</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>      <span class="o">^</span> <span class="n">Y</span>          <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>            <span class="o">|</span>            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">387</span><span class="p">)</span>
   <span class="o">------------------------------</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
 <span class="o">--|-------------+--------------|----&gt;</span> <span class="n">X</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">------------------------------</span>
<span class="p">(</span><span class="mi">184</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>          <span class="o">|</span>           <span class="p">(</span><span class="mi">184</span><span class="p">,</span><span class="mi">387</span><span class="p">)</span>
<span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>                  <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SegGeometryCspad2x1V1</span> <span class="k">import</span> <span class="n">cspad2x1_one</span> <span class="k">as</span> <span class="n">sg</span>

<span class="n">sg</span><span class="o">.</span><span class="n">print_seg_info</span><span class="p">(</span><span class="mi">0377</span><span class="p">)</span>

<span class="n">size_arr</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">rows</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">rows</span><span class="p">()</span>
<span class="n">cols</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">cols</span><span class="p">()</span>
<span class="n">shape</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">shape</span><span class="p">()</span>
<span class="n">pix_size</span> <span class="o">=</span> <span class="n">pixel_scale_size</span><span class="p">()</span>

<span class="n">area</span>  <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_area_array</span><span class="p">()</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_mask_array</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="c1"># where mbits = +1  - edges,</span>
<span class="c1">#               +2  - wide pixels,</span>
<span class="c1">#               +4  - non-bonded pixels,</span>
<span class="c1">#               +8  - nearest four neighbours of non-bonded</span>
<span class="c1">#               +16 - eight neighbours of non-bonded</span>

<span class="n">sizeX</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">sizeX</span><span class="p">,</span> <span class="n">sizeY</span><span class="p">,</span> <span class="n">sizeZ</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">()</span>

<span class="n">X</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">()</span>
<span class="nb">print</span> <span class="s1">&#39;X.shape =&#39;</span><span class="p">,</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>

<span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">()</span>
<span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">()</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>

<span class="c1"># global method for rotation of numpy arrays:</span>
<span class="n">Xrot</span><span class="p">,</span> <span class="n">Yrot</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2013-03-08 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1">
<em class="property">class </em><code class="descclassname">SegGeometryCspad2x1V1.</code><code class="descname">SegGeometryCspad2x1V1</code><span class="sig-paren">(</span><em>sp</em>, <em>use_wide_pix_center=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.SegGeometry.SegGeometry</span></code></p>
<p>Self-sufficient class for generation of CSPad 2x1 sensor pixel coordinate array</p>
<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.cols">
<code class="descname">cols</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of cols in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.make_pixel_coord_arrs">
<code class="descname">make_pixel_coord_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.make_pixel_coord_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.make_pixel_coord_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes [185,388] maps of x, y, and z 2x1 pixel coordinates
with origin in the center of 2x1</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.make_pixel_size_arrs">
<code class="descname">make_pixel_size_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.make_pixel_size_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.make_pixel_size_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes [185,388] maps of x, y, and z 2x1 pixel size</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_area_array">
<code class="descname">pixel_area_array</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_area_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_area_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel area array of shape=(rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_coord_array">
<code class="descname">pixel_coord_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_coord_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_coord_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_coord_max">
<code class="descname">pixel_coord_max</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_coord_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_coord_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns maximal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_coord_min">
<code class="descname">pixel_coord_min</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_coord_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_coord_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns minimal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_mask_array">
<code class="descname">pixel_mask_array</code><span class="sig-paren">(</span><em>sp</em>, <em>mbits=255</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_mask_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_mask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel mask: 1/0 = ok/masked,
mbits=1 - mask edges,
+2 - mask two central columns, 
+4 - mask non-bonded pixels,
+8 - mask nearest four neighbours of nonbonded pixels,
+16- mask eight neighbours of nonbonded pixels.</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_scale_size">
<code class="descname">pixel_scale_size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_scale_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_scale_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel size in um for indexing</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_size_array">
<code class="descname">pixel_size_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.pixel_size_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.pixel_size_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel sizes in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.print_seg_info">
<code class="descname">print_seg_info</code><span class="sig-paren">(</span><em>sp</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.print_seg_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.print_seg_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints segment info for selected bits
pbits=0 - nothing,
+1 - member data,
+2 - coordinate maps in um,
+4 - min, max coordinates in um,
+8 - x, y 1-d pixel coordinate arrays in um.</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.rows">
<code class="descname">rows</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of rows in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.shape">
<code class="descname">shape</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns shape of the segment (rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.size">
<code class="descname">size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryCspad2x1V1.html#SegGeometryCspad2x1V1.size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryCspad2x1V1.SegGeometryCspad2x1V1.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of pixels in segment</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-SegGeometryEpix100V1"></span><div class="section" id="class-seggeometryepix100v1-describes-the-epix100-v1-sensor-geometry">
<h2>Class <a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a> describes the Epix100 V1 sensor geometry<a class="headerlink" href="#class-seggeometryepix100v1-describes-the-epix100-v1-sensor-geometry" title="Permalink to this headline">¶</a></h2>
<p>In this class we use natural matrix notations like in data array</p>
<blockquote>
<div><p>We assume that</p>
<ul class="simple">
<li>2x2 ASICs has 704 rows and 768 columns,</li>
<li>Epix100 has a pixel size 50x50um, wide pixel size 50x175um</li>
<li>Epix10k has a pixel size 100x100um,</li>
<li>X-Y coordinate system origin is in the sensor center,</li>
<li>pixel (r,c)=(0,0) is in the top left corner of the matrix, has coordinates (xmin,ymax), as shown below</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>      <span class="o">^</span> <span class="n">Y</span>          <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>            <span class="o">|</span>            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">767</span><span class="p">)</span>
   <span class="o">------------------------------</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
 <span class="o">--|-------------+--------------|----&gt;</span> <span class="n">X</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span>
   <span class="o">------------------------------</span>
<span class="p">(</span><span class="mi">703</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>          <span class="o">|</span>           <span class="p">(</span><span class="mi">703</span><span class="p">,</span><span class="mi">767</span><span class="p">)</span>
<span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>                  <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SegGeometryEpix100V1</span> <span class="k">import</span> <span class="n">epix2x2_one</span> <span class="k">as</span> <span class="n">sg</span>

<span class="n">sg</span><span class="o">.</span><span class="n">print_seg_info</span><span class="p">(</span><span class="mi">0377</span><span class="p">)</span>

<span class="n">size_arr</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">rows</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">rows</span><span class="p">()</span>
<span class="n">cols</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">cols</span><span class="p">()</span>
<span class="n">shape</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">shape</span><span class="p">()</span>
<span class="n">pix_size</span> <span class="o">=</span> <span class="n">pixel_scale_size</span><span class="p">()</span>

<span class="n">area</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_area_array</span><span class="p">()</span>
<span class="n">mask</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_mask_array</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="c1"># where mbits = +1-edges, +2-wide pixels</span>

<span class="n">sizeX</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">sizeX</span><span class="p">,</span> <span class="n">sizeY</span><span class="p">,</span> <span class="n">sizeZ</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">()</span>

<span class="n">X</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">()</span>
<span class="nb">print</span> <span class="s1">&#39;X.shape =&#39;</span><span class="p">,</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>

<span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">()</span>
<span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">()</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>

<span class="c1"># global method for rotation of numpy arrays:</span>
<span class="n">Xrot</span><span class="p">,</span> <span class="n">Yrot</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2013-03-08 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1">
<em class="property">class </em><code class="descclassname">SegGeometryEpix100V1.</code><code class="descname">SegGeometryEpix100V1</code><span class="sig-paren">(</span><em>sp</em>, <em>use_wide_pix_center=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.SegGeometry.SegGeometry</span></code></p>
<p>Self-sufficient class for generation of Epix100 2x2 sensor pixel coordinate array</p>
<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.cols">
<code class="descname">cols</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of cols in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.make_pixel_coord_arrs">
<code class="descname">make_pixel_coord_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.make_pixel_coord_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.make_pixel_coord_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes [704,768] maps of x, y, and z 2x2 pixel coordinates
with origin in the center of 2x2</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.make_pixel_size_arrs">
<code class="descname">make_pixel_size_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.make_pixel_size_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.make_pixel_size_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes [704,768] maps of x, y, and z 2x2 pixel size</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_area_array">
<code class="descname">pixel_area_array</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_area_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_area_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel area array of shape=(rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_coord_array">
<code class="descname">pixel_coord_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_coord_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_coord_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_coord_max">
<code class="descname">pixel_coord_max</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_coord_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_coord_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns maximal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_coord_min">
<code class="descname">pixel_coord_min</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_coord_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_coord_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns minimal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_mask_array">
<code class="descname">pixel_mask_array</code><span class="sig-paren">(</span><em>sp</em>, <em>mbits=255</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_mask_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_mask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel mask: 1/0 = ok/masked,
mbits: +1 - mask edges,
+2 - mask two central columns</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_scale_size">
<code class="descname">pixel_scale_size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_scale_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_scale_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel size in um for indexing</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_size_array">
<code class="descname">pixel_size_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.pixel_size_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.pixel_size_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel sizes in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.print_seg_info">
<code class="descname">print_seg_info</code><span class="sig-paren">(</span><em>sp</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.print_seg_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.print_seg_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints segment info for selected bits
pbits = 0 - nothing,
+1 - member data,
+2 - coordinate maps in um,
+4 - min, max coordinates in um,
+8 - x, y 1-d pixel coordinate arrays in um.</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.rows">
<code class="descname">rows</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of rows in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.shape">
<code class="descname">shape</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns shape of the segment (rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryEpix100V1.SegGeometryEpix100V1.size">
<code class="descname">size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryEpix100V1.html#SegGeometryEpix100V1.size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryEpix100V1.SegGeometryEpix100V1.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of pixels in segment</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-SegGeometryMatrixV1"></span><div class="section" id="class-seggeometrymatrixv1-defines-the-matrix-v1-pnccd-512x512-sensor-pixel-coordinates-in-its-local-frame">
<h2>Class <a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a> defines the matrix V1 (pnCCD, 512x512) sensor pixel coordinates in its local frame<a class="headerlink" href="#class-seggeometrymatrixv1-defines-the-matrix-v1-pnccd-512x512-sensor-pixel-coordinates-in-its-local-frame" title="Permalink to this headline">¶</a></h2>
<p>Default constructor parameters are set for pnCCD; 512x512 pixels with 75x75um pixel size.
In this class we use natural matrix notations like in data array
(that is different from the DAQ notations where rows and cols are swapped).</p>
<blockquote>
<div><p>We assume that</p>
<ul class="simple">
<li>segment has 512 rows and 512 columns,</li>
<li>X-Y coordinate system origin is in the top left corner,</li>
<li>ixel (r,c)=(0,0) is in the top left corner of the matrix which has coordinates (Xmin,Ymin) - is in origin.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">MatrixV1</span> <span class="n">sensor</span> <span class="n">coordinate</span> <span class="n">frame</span> <span class="n">has</span> <span class="n">a</span> <span class="n">matrix</span><span class="o">-</span><span class="n">style</span> <span class="n">coordinate</span> <span class="n">system</span><span class="p">:</span>

<span class="nd">@code</span>
  <span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>        <span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>
  <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>              <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">511</span><span class="p">)</span>
     <span class="o">+-----------------+----&gt;</span> <span class="n">Y</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">|</span>                 <span class="o">|</span>
     <span class="o">+-----------------+</span>
     <span class="o">|</span>
   <span class="n">X</span> <span class="n">V</span>
  <span class="p">(</span><span class="mi">511</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>           <span class="p">(</span><span class="mi">511</span><span class="p">,</span><span class="mi">511</span><span class="p">)</span>
  <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>       <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>
<span class="nd">@endcode</span>
</pre></div>
</div>
</div></blockquote>
<p>Usage of interface methods:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SegGeometryMatrixV1</span> <span class="k">import</span> <span class="n">cspad2x1_one</span> <span class="k">as</span> <span class="n">sg</span>

<span class="n">sg</span><span class="o">.</span><span class="n">print_seg_info</span><span class="p">(</span><span class="mi">0377</span><span class="p">)</span>

<span class="n">size_arr</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">rows</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">rows</span><span class="p">()</span>
<span class="n">cols</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">cols</span><span class="p">()</span>
<span class="n">shape</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">shape</span><span class="p">()</span>
<span class="n">pix_size</span> <span class="o">=</span> <span class="n">pixel_scale_size</span><span class="p">()</span>

<span class="n">area</span>  <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_area_array</span><span class="p">()</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_mask_array</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="c1"># where mbits = +1-edges, +2-wide pixels, +4-non-bonded pixels, +8-neighbours of non-bonded</span>

<span class="n">sizeX</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">sizeX</span><span class="p">,</span> <span class="n">sizeY</span><span class="p">,</span> <span class="n">sizeZ</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">()</span>

<span class="n">X</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">()</span>
<span class="nb">print</span> <span class="s1">&#39;X.shape =&#39;</span><span class="p">,</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>

<span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">()</span>
<span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">()</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>

<span class="c1"># global method for rotation of numpy arrays:</span>
<span class="n">Xrot</span><span class="p">,</span> <span class="n">Yrot</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a>,</li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2013-03-08 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1">
<em class="property">class </em><code class="descclassname">SegGeometryMatrixV1.</code><code class="descname">SegGeometryMatrixV1</code><span class="sig-paren">(</span><em>sp</em>, <em>rows=512</em>, <em>cols=512</em>, <em>pix_size_rows=75</em>, <em>pix_size_cols=75</em>, <em>pix_size_depth=400</em>, <em>pix_scale_size=75</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.SegGeometry.SegGeometry</span></code></p>
<p>Self-sufficient class for generation of CSPad 2x1 sensor pixel coordinate array</p>
<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.cols">
<code class="descname">cols</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of cols in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.make_pixel_coord_arrs">
<code class="descname">make_pixel_coord_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.make_pixel_coord_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.make_pixel_coord_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes maps of x, y, and z of segment pixel coordinates</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.make_pixel_size_arrs">
<code class="descname">make_pixel_size_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.make_pixel_size_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.make_pixel_size_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes maps of x, y, and z segment pixel size</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_area_array">
<code class="descname">pixel_area_array</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_area_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_area_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel area array of shape=(rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_coord_array">
<code class="descname">pixel_coord_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_coord_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_coord_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_coord_max">
<code class="descname">pixel_coord_max</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_coord_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_coord_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns maximal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_coord_min">
<code class="descname">pixel_coord_min</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_coord_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_coord_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns minimal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_mask_array">
<code class="descname">pixel_mask_array</code><span class="sig-paren">(</span><em>sp</em>, <em>mbits=255</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_mask_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_mask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel mask: 1/0 = ok/masked,
mbits=1 - mask edges,
+2 - mask two central columns, 
+4 - mask non-bonded pixels,
+8 - mask nearest neighbours of nonbonded pixels.</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_scale_size">
<code class="descname">pixel_scale_size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_scale_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_scale_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel size in um for indexing</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_size_array">
<code class="descname">pixel_size_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.pixel_size_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.pixel_size_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel sizes in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.print_seg_info">
<code class="descname">print_seg_info</code><span class="sig-paren">(</span><em>sp</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.print_seg_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.print_seg_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints segment info for selected bits
pbits=0 - nothing,
+1 - member data,
+2 - coordinate maps in um,
+4 - min, max coordinates in um,
+8 - x, y 1-d pixel coordinate arrays in um.</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.rows">
<code class="descname">rows</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of rows in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.shape">
<code class="descname">shape</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns shape of the segment (rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryMatrixV1.SegGeometryMatrixV1.size">
<code class="descname">size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#SegGeometryMatrixV1.size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.SegGeometryMatrixV1.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of pixels in segment</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="SegGeometryMatrixV1.matrix_pars">
<code class="descclassname">SegGeometryMatrixV1.</code><code class="descname">matrix_pars</code><span class="sig-paren">(</span><em>segname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryMatrixV1.html#matrix_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryMatrixV1.matrix_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the matrix sensor parameters from its string-name, ex: MTRX:512:512:54:54</p>
</dd></dl>

</div>
<span class="target" id="module-SegGeometryJungfrauV1"></span><div class="section" id="class-seggeometryjungfrauv1-describes-the-jungfrau-v1-sensor-geometry">
<h2>Class <a class="reference internal" href="#module-SegGeometryJungfrauV1" title="SegGeometryJungfrauV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryJungfrauV1</span></code></a> describes the Jungfrau V1 sensor geometry<a class="headerlink" href="#class-seggeometryjungfrauv1-describes-the-jungfrau-v1-sensor-geometry" title="Permalink to this headline">¶</a></h2>
<p>Data array for Jungfrau 512x1024 segment is shaped as (1,512,1024), 
has a matrix-like numeration for rows and columns with gaps between 2x4 ASICs</p>
<blockquote>
<div><p>We assume that</p>
<ul class="simple">
<li>1x1 ASICs has 256 rows and 256 columns,</li>
<li>Jungfrau has a pixel size 75x75um</li>
<li>X-Y coordinate system origin is in the sensor center,</li>
<li>pixel (r,c)=(0,0) is in the top left corner of the matrix, has coordinates (xmin,ymax), as shown below</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>                          <span class="o">^</span> <span class="n">Y</span>                          <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymax</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>                                <span class="o">|</span>                               <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1023</span><span class="p">)</span>
  <span class="o">-----------------</span> <span class="o">-----------------|-----------------</span> <span class="o">-----------------</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>     <span class="n">ASIC</span>      <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>    <span class="mi">256</span><span class="n">x256</span>    <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">-----------------</span> <span class="o">-----------------|-----------------</span> <span class="o">-----------------</span>
<span class="o">-------------------------------------+-------------------------------------&gt;</span> <span class="n">X</span>
  <span class="o">-----------------</span> <span class="o">-----------------|-----------------</span> <span class="o">-----------------</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">|</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|||</span>               <span class="o">|</span> <span class="o">|</span>               <span class="o">|</span>
  <span class="o">-----------------</span> <span class="o">-----------------|-----------------</span> <span class="o">-----------------</span>
<span class="p">(</span><span class="mi">511</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>                              <span class="o">|</span>                             <span class="p">(</span><span class="mi">1023</span><span class="p">,</span><span class="mi">1023</span><span class="p">)</span>
<span class="p">(</span><span class="n">Xmin</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>                                                        <span class="p">(</span><span class="n">Xmax</span><span class="p">,</span><span class="n">Ymin</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PSCalib.SegGeometryJungfrauV1</span> <span class="k">import</span> <span class="n">jungfrau_one</span> <span class="k">as</span> <span class="n">sg</span>

<span class="n">sg</span><span class="o">.</span><span class="n">print_seg_info</span><span class="p">(</span><span class="mi">0377</span><span class="p">)</span>

<span class="n">size_arr</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">rows</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">rows</span><span class="p">()</span>
<span class="n">cols</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">cols</span><span class="p">()</span>
<span class="n">shape</span>    <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">shape</span><span class="p">()</span>
<span class="n">pix_size</span> <span class="o">=</span> <span class="n">pixel_scale_size</span><span class="p">()</span>

<span class="n">area</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_area_array</span><span class="p">()</span>
<span class="n">mask</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_mask_array</span><span class="p">(</span><span class="n">mbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># where mbits = +1-edges, +2-wide pixels</span>

<span class="n">sizeX</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">sizeX</span><span class="p">,</span> <span class="n">sizeY</span><span class="p">,</span> <span class="n">sizeZ</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_size_array</span><span class="p">()</span>

<span class="n">X</span>     <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_array</span><span class="p">()</span>
<span class="nb">print</span> <span class="s1">&#39;X.shape =&#39;</span><span class="p">,</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>

<span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">()</span>
<span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">()</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_min</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">pixel_coord_max</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>

<span class="c1"># global method for rotation of numpy arrays:</span>
<span class="n">Xrot</span><span class="p">,</span> <span class="n">Yrot</span> <span class="o">=</span> <span class="n">rotation</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GeometryObject" title="GeometryObject"><code class="xref py py-class docutils literal"><span class="pre">GeometryObject</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometry" title="SegGeometry"><code class="xref py py-class docutils literal"><span class="pre">SegGeometry</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryCspad2x1V1" title="SegGeometryCspad2x1V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryCspad2x1V1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryEpix100V1" title="SegGeometryEpix100V1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryEpix100V1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryJungfrauV1" title="SegGeometryJungfrauV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryJungfrauV1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryMatrixV1" title="SegGeometryMatrixV1"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryMatrixV1</span></code></a></li>
<li><a class="reference internal" href="#module-SegGeometryStore" title="SegGeometryStore"><code class="xref py py-class docutils literal"><span class="pre">SegGeometryStore</span></code></a></li>
</ul>
</dd>
</dl>
<p>For more detail see <a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Detector+Geometry">Detector Geometry</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2017-10-12 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1">
<em class="property">class </em><code class="descclassname">SegGeometryJungfrauV1.</code><code class="descname">SegGeometryJungfrauV1</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.SegGeometry.SegGeometry</span></code></p>
<p>Self-sufficient class for generation of Jungfrau 2x4 sensor pixel coordinate array</p>
<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.cols">
<code class="descname">cols</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of cols in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.make_pixel_coord_arrs">
<code class="descname">make_pixel_coord_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.make_pixel_coord_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.make_pixel_coord_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes [512,1024] maps of x, y, and z pixel coordinates
with origin in the center of 2x4</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.make_pixel_size_arrs">
<code class="descname">make_pixel_size_arrs</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.make_pixel_size_arrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.make_pixel_size_arrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes [512,1024] maps of x, y, and z 2x2 pixel size</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_area_array">
<code class="descname">pixel_area_array</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_area_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_area_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel area array of shape=(rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_coord_array">
<code class="descname">pixel_coord_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_coord_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_coord_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_coord_max">
<code class="descname">pixel_coord_max</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_coord_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_coord_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns maximal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_coord_min">
<code class="descname">pixel_coord_min</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_coord_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_coord_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns minimal value in the array of segment pixel coordinates in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_mask_array">
<code class="descname">pixel_mask_array</code><span class="sig-paren">(</span><em>sp</em>, <em>mbits=255</em>, <em>width=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_mask_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_mask_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel mask: 1/0 = ok/masked,</p>
<p>Parameters</p>
<dl class="docutils">
<dt>mbits: </dt>
<dd>+1 - mask edges,
+2 - mask central columns</dd>
</dl>
<p>width (uint) - width in pixels of masked edge</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_scale_size">
<code class="descname">pixel_scale_size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_scale_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_scale_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel size in um for indexing</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_size_array">
<code class="descname">pixel_size_array</code><span class="sig-paren">(</span><em>sp</em>, <em>axis=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.pixel_size_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.pixel_size_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns numpy array of pixel sizes in um for AXIS</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.print_seg_info">
<code class="descname">print_seg_info</code><span class="sig-paren">(</span><em>sp</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.print_seg_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.print_seg_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints segment info for selected bits
pbits = 0 - nothing,
+1 - member data,
+2 - coordinate maps in um,
+4 - min, max coordinates in um,
+8 - x, y 1-d pixel coordinate arrays in um.</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.rows">
<code class="descname">rows</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of rows in segment</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.shape">
<code class="descname">shape</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns shape of the segment (rows, cols)</p>
</dd></dl>

<dl class="method">
<dt id="SegGeometryJungfrauV1.SegGeometryJungfrauV1.size">
<code class="descname">size</code><span class="sig-paren">(</span><em>sp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SegGeometryJungfrauV1.html#SegGeometryJungfrauV1.size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SegGeometryJungfrauV1.SegGeometryJungfrauV1.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of pixels in segment</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DCMethods"></span><div class="section" id="dcmethods-is-a-set-of-utilities-for-direct-operations-with-calibration-data">
<h2><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a> is a set of utilities for direct operations with calibration data<a class="headerlink" href="#dcmethods-is-a-set-of-utilities-for-direct-operations-with-calibration-data" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">import</span> <span class="nn">psana</span>
<span class="kn">import</span> <span class="nn">PSCalib.DCMethods</span> <span class="k">as</span> <span class="nn">dcm</span>

<span class="c1"># Example of parameters</span>
<span class="n">dsname</span> <span class="o">=</span> <span class="s1">&#39;exp=cxif5315:run=129&#39;</span>
<span class="c1"># or:</span>
<span class="n">dsname</span> <span class="o">=</span> <span class="s1">&#39;/reg/g/psdm/detector/data_test/xtc/cxif5315-e545-r0169-s00-c00.xtc&#39;</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">dsname</span><span class="p">)</span>
<span class="n">env</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">env</span><span class="p">()</span>
<span class="n">evt</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

<span class="n">src</span>      <span class="o">=</span> <span class="s1">&#39;Cspad.&#39;</span> <span class="c1"># &#39;Epix100a.&#39;, etc</span>
<span class="n">ctype</span>    <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span> <span class="c1"># | gu.PEDESTALS | gu.PIXEL_STATUS, etc.</span>
<span class="n">vers</span>     <span class="o">=</span> <span class="kc">None</span> <span class="c1"># or e.g. 5</span>
<span class="n">calibdir</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># or e.g. &#39;./calib&#39;</span>
<span class="n">nda</span>      <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">32</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">388</span><span class="p">))</span>
<span class="n">pred</span>     <span class="o">=</span> <span class="s1">&#39;CxiDs2.0:Cspad.0&#39;</span>
<span class="n">succ</span>     <span class="o">=</span> <span class="s1">&#39;CxiDs2.0:Cspad.0&#39;</span>
<span class="nb">range</span>    <span class="o">=</span> <span class="s1">&#39;1474587520-end&#39;</span>

<span class="n">par</span>      <span class="o">=</span> <span class="n">evt</span> <span class="c1"># psana.Event | float - tsec event time</span>
<span class="n">parts</span>    <span class="o">=</span> <span class="n">env</span> <span class="c1"># psana.Env | psana.Event | float - tsec event time</span>

<span class="c1"># Methods with dynamically-reconstructed calib file name</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">add_constants</span><span class="p">(</span><span class="n">nda</span><span class="p">,</span> <span class="n">par</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;Epix100a.&#39;</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pred</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">succ</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">print_content</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;Epix100a.&#39;</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">get_constants</span><span class="p">(</span><span class="n">par</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;Epix100a.&#39;</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">delete_version</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;Epix100a.&#39;</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">delete_range</span>  <span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;Epix100a.&#39;</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">delete_ctype</span>  <span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;Epix100a.&#39;</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Methods using fname</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">add_constants_to_file</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">parts</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pred</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">succ</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">print_content_from_file</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">get_constants_from_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">parts</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">delete_version_from_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">parts</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">delete_range_from_file</span>  <span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dcm</span><span class="o">.</span><span class="n">delete_ctype_from_file</span>  <span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">ctype</span><span class="o">=</span><span class="n">gu</span><span class="o">.</span><span class="n">PIXEL_MASK</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Methods </dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#DCMethods.add_constants" title="DCMethods.add_constants"><code class="xref py py-meth docutils literal"><span class="pre">add_constants()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.add_constants_to_file" title="DCMethods.add_constants_to_file"><code class="xref py py-meth docutils literal"><span class="pre">add_constants_to_file()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.print_content" title="DCMethods.print_content"><code class="xref py py-meth docutils literal"><span class="pre">print_content()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.print_content_from_file" title="DCMethods.print_content_from_file"><code class="xref py py-meth docutils literal"><span class="pre">print_content_from_file()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.get_constants" title="DCMethods.get_constants"><code class="xref py py-meth docutils literal"><span class="pre">get_constants()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.get_constants_from_file" title="DCMethods.get_constants_from_file"><code class="xref py py-meth docutils literal"><span class="pre">get_constants_from_file()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.delete_version" title="DCMethods.delete_version"><code class="xref py py-meth docutils literal"><span class="pre">delete_version()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.delete_version_from_file" title="DCMethods.delete_version_from_file"><code class="xref py py-meth docutils literal"><span class="pre">delete_version_from_file()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.delete_range" title="DCMethods.delete_range"><code class="xref py py-meth docutils literal"><span class="pre">delete_range()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.delete_range_from_file" title="DCMethods.delete_range_from_file"><code class="xref py py-meth docutils literal"><span class="pre">delete_range_from_file()</span></code></a>,</li>
<li><a class="reference internal" href="#DCMethods.delete_ctype" title="DCMethods.delete_ctype"><code class="xref py py-meth docutils literal"><span class="pre">delete_ctype()</span></code></a></li>
<li><a class="reference internal" href="#DCMethods.delete_ctype_from_file" title="DCMethods.delete_ctype_from_file"><code class="xref py py-meth docutils literal"><span class="pre">delete_ctype_from_file()</span></code></a></li>
</ul>
</dd>
<dt>Classes:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016-09-23 by Mikhail Dubrovin</p>
<dl class="function">
<dt id="DCMethods.add_constants">
<code class="descclassname">DCMethods.</code><code class="descname">add_constants</code><span class="sig-paren">(</span><em>data</em>, <em>par</em>, <em>env</em>, <em>src='Epix100a.'</em>, <em>ctype=4</em>, <em>calibdir=None</em>, <em>vers=None</em>, <em>pred=None</em>, <em>succ=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#add_constants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.add_constants" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds specified numpy array to the hdf5 file.</p>
<p>Parameters</p>
<ul class="simple">
<li>data : numpy.array or str - array or string of calibration constants/data to save in file</li>
<li>env  : psana.Env -&gt; full detector name for psana.Source -&gt; hdf5 file name</li>
<li>par  : psana.Event | float time -&gt; event time</li>
<li>src  : str - source short/full name, alias or full -&gt; hdf5 file name</li>
<li>ctype: gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>calibdir : str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</li>
<li>vers : int - calibration version</li>
<li>pred : str - predecessor name</li>
<li>succ : str - successor name</li>
<li>cmt  : str - comment saved as a history record within DCRange</li>
<li>verb : bool - verbosity, default=False - do not prnt any message</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.add_constants_to_file">
<code class="descclassname">DCMethods.</code><code class="descname">add_constants_to_file</code><span class="sig-paren">(</span><em>data</em>, <em>fname</em>, <em>par</em>, <em>env=None</em>, <em>ctype=4</em>, <em>vers=None</em>, <em>pred=None</em>, <em>succ=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#add_constants_to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.add_constants_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds specified numpy array to the hdf5 file.</p>
<p>Parameters</p>
<ul class="simple">
<li>data : numpy.array or str - array or string of calibration constants/data to save in file</li>
<li>fname: full path to the hdf5 file</li>
<li>par  : psana.Event | psana.Env | float - tsec event time</li>
<li>env  : psana.Env -&gt; is used to get exp=env.experiment() for comments etc.</li>
<li>ctype: gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>vers : int - calibration version</li>
<li>pred : str - predecessor name</li>
<li>succ : str - successor name</li>
<li>cmt  : str - comment saved as a history record within DCRange</li>
<li>verb : bool - verbosity, default=False - do not print any message</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.delete_ctype">
<code class="descclassname">DCMethods.</code><code class="descname">delete_ctype</code><span class="sig-paren">(</span><em>evt</em>, <em>env</em>, <em>src='Epix100a.'</em>, <em>ctype=4</em>, <em>calibdir=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#delete_ctype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.delete_ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete specified ctype from calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>evt      : psana.Event -&gt; event time</li>
<li>env      : psana.Env -&gt; full detector name for psana.Source</li>
<li>src      : str - source short/full name, alias or full</li>
<li>ctype    : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>calibdir : str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</li>
<li>cmt      : str - comment</li>
<li>verb     : bool - verbousity</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.delete_ctype_from_file">
<code class="descclassname">DCMethods.</code><code class="descname">delete_ctype_from_file</code><span class="sig-paren">(</span><em>fname</em>, <em>ctype=4</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#delete_ctype_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.delete_ctype_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete specified ctype from calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : full path to the hdf5 file</li>
<li>ctype : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>cmt   : str - comment</li>
<li>verb  : bool - verbousity</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.delete_range">
<code class="descclassname">DCMethods.</code><code class="descname">delete_range</code><span class="sig-paren">(</span><em>evt</em>, <em>env</em>, <em>src='Epix100a.'</em>, <em>ctype=4</em>, <em>calibdir=None</em>, <em>range=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#delete_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.delete_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete specified time range from calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>evt : psana.Event -&gt; event time</li>
<li>env : psana.Env -&gt; full detector name for psana.Source</li>
<li>src : str - source short/full name, alias or full</li>
<li>ctype : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>calibdir : str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</li>
<li>range : str - range, e.g. ‘1474587520-end’</li>
<li>cmt   : str - comment</li>
<li>verb  : bool - verbousity</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.delete_range_from_file">
<code class="descclassname">DCMethods.</code><code class="descname">delete_range_from_file</code><span class="sig-paren">(</span><em>fname</em>, <em>ctype=4</em>, <em>range=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#delete_range_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.delete_range_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete specified time range from calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : full path to the hdf5 file</li>
<li>ctype : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>range : str - range, e.g. ‘1474587520-end’</li>
<li>cmt   : str - comment</li>
<li>verb  : bool - verbousity</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.delete_version">
<code class="descclassname">DCMethods.</code><code class="descname">delete_version</code><span class="sig-paren">(</span><em>evt</em>, <em>env</em>, <em>src='Epix100a.'</em>, <em>ctype=4</em>, <em>calibdir=None</em>, <em>vers=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#delete_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.delete_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete specified version from calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>evt : psana.Event -&gt; event time</li>
<li>env : psana.Env -&gt; full detector name for psana.Source</li>
<li>src : str - source short/full name, alias or full</li>
<li>ctype : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>calibdir : str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</li>
<li>vers : int - calibration version</li>
<li>cmt  : str - comment</li>
<li>verb : bool - verbousity</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.delete_version_from_file">
<code class="descclassname">DCMethods.</code><code class="descname">delete_version_from_file</code><span class="sig-paren">(</span><em>fname</em>, <em>par</em>, <em>ctype=4</em>, <em>vers=None</em>, <em>cmt=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#delete_version_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.delete_version_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete specified version from calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : full path to the hdf5 file</li>
<li>par   : psana.Event | psana.Env | float - tsec event time</li>
<li>ctype : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>vers  : int - calibration version</li>
<li>cmt   : str - comment</li>
<li>verb  : bool - verbousity</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.get_constants">
<code class="descclassname">DCMethods.</code><code class="descname">get_constants</code><span class="sig-paren">(</span><em>par</em>, <em>env</em>, <em>src='Epix100a.'</em>, <em>ctype=4</em>, <em>calibdir=None</em>, <em>vers=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#get_constants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.get_constants" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns specified array of calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>par: psana.Event | float - tsec event time</li>
<li>env: psana.Env - to get full detector name for psana.Source</li>
<li>src: str - source short/full name, alias or full</li>
<li>ctype: gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>calibdir: str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</li>
<li>vers: int - calibration version</li>
</ul>
<p>Return</p>
<p>numpy.array - array of calibratiopn constatnts.</p>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.get_constants_from_file">
<code class="descclassname">DCMethods.</code><code class="descname">get_constants_from_file</code><span class="sig-paren">(</span><em>fname</em>, <em>par</em>, <em>ctype=4</em>, <em>vers=None</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#get_constants_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.get_constants_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns specified array of calibration constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : full path to the hdf5 file</li>
<li>par   : psana.Event | psana.Env | float - tsec event time</li>
<li>ctype : gu.CTYPE - enumerated calibration type, e.g.: gu.PIXEL_MASK</li>
<li>vers  : int - calibration version</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>np.array - specified array of calibration constants</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.is_good_fname">
<code class="descclassname">DCMethods.</code><code class="descname">is_good_fname</code><span class="sig-paren">(</span><em>fname</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#is_good_fname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.is_good_fname" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the hdf5 file name validity, returns True or False.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : str - full path to the file</li>
<li>verb : bool - verbosity, default=False - do not print any message</li>
</ul>
<p>Returns</p>
<p>True/False - for existing or not file</p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.print_content">
<code class="descclassname">DCMethods.</code><code class="descname">print_content</code><span class="sig-paren">(</span><em>env</em>, <em>src='Epix100a.'</em>, <em>calibdir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#print_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.print_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the file name and prints file content.</p>
<p>Parameters</p>
<ul class="simple">
<li>env : psana.Env -&gt; full detector name for psana.Source</li>
<li>src : str - source short/full name, alias or full</li>
<li>calibdir : str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="DCMethods.print_content_from_file">
<code class="descclassname">DCMethods.</code><code class="descname">print_content_from_file</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCMethods.html#print_content_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCMethods.print_content_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints content of the file.</p>
<p>Parameters</p>
<ul class="simple">
<li>fname : str - full path to the file</li>
</ul>
<p>See <a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></p>
</dd></dl>

</div>
<span class="target" id="module-DCStore"></span><div class="section" id="class-dcstore-for-the-detector-calibration-dc-project">
<h2>Class <a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a> for the Detector Calibration (DC) project<a class="headerlink" href="#class-dcstore-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCStore</span> <span class="k">import</span> <span class="n">DCStore</span>

<span class="c1"># Initialization</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">DCStore</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>

<span class="c1"># Methods</span>
<span class="n">tscfile</span>     <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">tscfile</span><span class="p">()</span>               <span class="c1"># (double) time stamp of the file creation</span>
<span class="n">dettype</span>     <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">dettype</span><span class="p">()</span>               <span class="c1"># (str) detector type</span>
<span class="n">detid</span>       <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">detid</span><span class="p">()</span>                 <span class="c1"># (str) detector id</span>
<span class="n">detname</span>     <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">detname</span><span class="p">()</span>               <span class="c1"># (str) detector name of self object</span>
<span class="n">predecessor</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">predecessor</span><span class="p">()</span>           <span class="c1"># (str) detname of predecessor or None</span>
<span class="n">successor</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">successor</span><span class="p">()</span>             <span class="c1"># (str) detname of successor or None</span>
<span class="n">ctypes</span>      <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">ctypes</span><span class="p">()</span>                <span class="c1"># (list) calibration types in the file</span>
<span class="n">cto</span>         <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">ctypeobj</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>         <span class="c1"># (DCType ~ h5py.Group) calibration type object</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_tscfile</span><span class="p">(</span><span class="n">tsec</span><span class="p">)</span>                     <span class="c1"># set (double) time stamp of the file creation </span>
<span class="n">o</span><span class="o">.</span><span class="n">set_dettype</span><span class="p">(</span><span class="n">dettype</span><span class="p">)</span>                  <span class="c1"># set (str) detector type</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_detid</span><span class="p">(</span><span class="n">detid</span><span class="p">)</span>                      <span class="c1"># set (str) detector id</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_detname</span><span class="p">(</span><span class="n">detname</span><span class="p">)</span>                  <span class="c1"># set (str) detector name of self object</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_predecessor</span><span class="p">(</span><span class="n">pred</span><span class="p">)</span>                 <span class="c1"># set (str) detname of predecessor or None</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_successor</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span>                   <span class="c1"># set (str) detname of successor or None</span>
<span class="n">o</span><span class="o">.</span><span class="n">add_ctype</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>                      <span class="c1"># add (str) calibration type to the DCStore object</span>
<span class="n">ctype</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">mark_ctype</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>             <span class="c1"># delete ctype (str) from the DCStore object, returns ctype or None</span>
<span class="n">o</span><span class="o">.</span><span class="n">mark_ctypes</span><span class="p">()</span>                         <span class="c1"># delete all ctypes (str) from the DCStore object</span>
<span class="n">o</span><span class="o">.</span><span class="n">clear_ctype</span><span class="p">()</span>                         <span class="c1"># clear all ctypes (str) from the DCStore object dictionary</span>

<span class="n">o</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r+&#39;</span><span class="p">)</span>                <span class="c1"># saves object in hdf5 file. mode=&#39;r+&#39;/&#39;w&#39; update/rewrite file.</span>
<span class="n">o</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>                           <span class="c1"># loads object content from the hdf5 file. </span>
<span class="n">o</span><span class="o">.</span><span class="n">print_obj</span><span class="p">()</span>                           <span class="c1"># print info about this object and its children</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCStore.DCStore">
<em class="property">class </em><code class="descclassname">DCStore.</code><code class="descname">DCStore</code><span class="sig-paren">(</span><em>path</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCStore.html#DCStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCStore.DCStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCInterface.DCStoreI</span></code></p>
<p>Class for the Detector Calibration (DC) project</p>
<p>Parameters</p>
<p>path : str - path to the hdf5 file with calibration info
cmt  : str - comment</p>
<dl class="method">
<dt id="DCStore.DCStore.mark_ctype">
<code class="descname">mark_ctype</code><span class="sig-paren">(</span><em>ctype</em>, <em>cmt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCStore.html#DCStore.mark_ctype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCStore.DCStore.mark_ctype" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks child object for deletion in save()</p>
</dd></dl>

<dl class="method">
<dt id="DCStore.DCStore.mark_ctypes">
<code class="descname">mark_ctypes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCStore.html#DCStore.mark_ctypes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCStore.DCStore.mark_ctypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks all child objects for deletion in save()</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DCBase"></span><div class="section" id="class-dcbase-is-a-base-class-for-the-detector-calibration-dc-project">
<h2>Class <a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a> is a base class for the Detector Calibration (DC) project<a class="headerlink" href="#class-dcbase-is-a-base-class-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCBase</span> <span class="k">import</span> <span class="n">DCBase</span>

<span class="n">o</span> <span class="o">=</span> <span class="n">DCBase</span><span class="p">()</span>

<span class="c1"># Dictionary of parameters</span>
<span class="c1"># ========================</span>

<span class="n">o</span><span class="o">.</span><span class="n">set_pars_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>                   <span class="c1"># set (dict) dictionary of pars.</span>
<span class="n">o</span><span class="o">.</span><span class="n">add_par</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>                       <span class="c1"># add (k,v) par to the dictionary of pars.</span>
<span class="n">o</span><span class="o">.</span><span class="n">del_par</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>                         <span class="c1"># delete par with key k. </span>
<span class="n">o</span><span class="o">.</span><span class="n">clear_pars</span><span class="p">()</span>                       <span class="c1"># delete all pars from the dictionary.</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pars_dict</span><span class="p">()</span>                    <span class="c1"># returns (dict) dictionary of pars.</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">par</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>                         <span class="c1"># returns par value for key k.</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pars_text</span><span class="p">()</span>                    <span class="c1"># returns (str) text of all pars.</span>

<span class="c1"># History records</span>
<span class="c1"># ===============</span>

<span class="n">o</span><span class="o">.</span><span class="n">set_history_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>                <span class="c1"># set (dict) dictionary of history from specified dictionary</span>
<span class="n">o</span><span class="o">.</span><span class="n">add_history_record</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">tsec</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># add (str) record with (int) time[sec] to the history dictionary of (tsec:rec).</span>
                                     <span class="c1"># If tsec is None - current time is used as a key.</span>
<span class="n">o</span><span class="o">.</span><span class="n">del_history_record</span><span class="p">(</span><span class="n">tsec</span><span class="p">)</span>           <span class="c1"># Delete one history record from the dictionary by its time tsec.</span>
<span class="n">o</span><span class="o">.</span><span class="n">clear_history</span><span class="p">()</span>                    <span class="c1"># Delete all history records from the dictionary.</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">history_dict</span><span class="p">()</span>                 <span class="c1"># returns (dict) history dictionary associated with current object .</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">history_record</span><span class="p">(</span><span class="n">tsec</span><span class="p">)</span>           <span class="c1"># returns (str) history record for specified time tsec.</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">history_text</span><span class="p">(</span><span class="n">tsfmt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>       <span class="c1"># returns (str) all history records preceded by the time stamp as a text.</span>

<span class="c1"># Save and Load</span>
<span class="c1"># =============</span>

<span class="n">o</span><span class="o">.</span><span class="n">save_history_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;history.txt&#39;</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># save history in the text file</span>
<span class="n">o</span><span class="o">.</span><span class="n">load_history_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;history.txt&#39;</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># load history from the text file</span>

<span class="n">o</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">grp</span><span class="p">)</span>                     <span class="c1"># save everything in hdf5 group</span>
<span class="n">o</span><span class="o">.</span><span class="n">load_base</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">grp</span><span class="p">)</span>               <span class="c1"># load from hdf5 group</span>

<span class="c1"># Time convertors</span>
<span class="c1"># ===============</span>

<span class="n">t_str</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">tsec_to_tstr</span><span class="p">(</span><span class="n">tsec</span><span class="p">,</span> <span class="n">tsfmt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># converts (float) time[sec] to the (str) time stamp</span>
<span class="n">t_sec</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">tstr_to_tsec</span><span class="p">(</span><span class="n">tstr</span><span class="p">,</span> <span class="n">tsfmt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># converts (str) time stamp to (float) time[sec]</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCBase.DCBase">
<em class="property">class </em><code class="descclassname">DCBase.</code><code class="descname">DCBase</code><span class="sig-paren">(</span><em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Base class for the Detector Calibration (DC) project.</p>
<p>Parameters</p>
<p>cmt : str - string of comment associated with derived class object.</p>
<dl class="attribute">
<dt id="DCBase.DCBase.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#DCBase.DCBase.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.history_text">
<code class="descname">history_text</code><span class="sig-paren">(</span><em>tsfmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.history_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.history_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) history records preceded by the time stamp as a text</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.load_history_file">
<code class="descname">load_history_file</code><span class="sig-paren">(</span><em>path='history.txt'</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.load_history_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.load_history_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load history from the text file</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.make_record">
<code class="descname">make_record</code><span class="sig-paren">(</span><em>action=''</em>, <em>key=''</em>, <em>cmt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.make_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.make_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string record combined with comment.</p>
<p>Parameters</p>
<p>action : str - description of method action,
key    : str - key for hdf5 group or dataset name,
cmt    : str/None/False - additional comment or no-comment: False is used to turn off history record, None - no-comment.</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.print_base">
<code class="descname">print_base</code><span class="sig-paren">(</span><em>offset='  '</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.print_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.print_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Print content of dictionaries of parameters and history</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.save_history_file">
<code class="descname">save_history_file</code><span class="sig-paren">(</span><em>path='history.txt'</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.save_history_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.save_history_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Save history in the text file</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.tsec_to_tstr">
<code class="descname">tsec_to_tstr</code><span class="sig-paren">(</span><em>tsec</em>, <em>tsfmt=None</em>, <em>addfsec=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.tsec_to_tstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.tsec_to_tstr" title="Permalink to this definition">¶</a></dt>
<dd><p>converts float tsec like 1471035078.908067 to the string 2016-08-12T13:51:18.908067</p>
</dd></dl>

<dl class="method">
<dt id="DCBase.DCBase.tstr_to_tsec">
<code class="descname">tstr_to_tsec</code><span class="sig-paren">(</span><em>tstr</em>, <em>tsfmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCBase.html#DCBase.tstr_to_tsec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCBase.DCBase.tstr_to_tsec" title="Permalink to this definition">¶</a></dt>
<dd><p>converts string tstr like 2016-08-12T13:51:18.908067 to the float time in seconds 1471035078.908067</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DCType"></span><div class="section" id="class-dctype-for-the-detector-calibration-dc-project">
<h2>Class <a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a> for the Detector Calibration (DC) project<a class="headerlink" href="#class-dctype-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCType</span> <span class="k">import</span> <span class="n">DCType</span>

<span class="c1"># Initialization</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">DCType</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>

<span class="c1"># Methods</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_ctype</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>                 <span class="c1"># add (str) of time ranges for ctype.</span>
<span class="n">ctype</span>  <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">ctype</span><span class="p">()</span>                 <span class="c1"># returns (str) of ctype name.</span>
<span class="n">ranges</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">ranges</span><span class="p">()</span>                <span class="c1"># returns (dict) of time range objects.</span>
<span class="nb">range</span>  <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>       <span class="c1"># returns time stamp validity range object.</span>
<span class="n">ro</span>     <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">range_for_tsec</span><span class="p">(</span><span class="n">tsec</span><span class="p">)</span>    <span class="c1"># (DCRange) range object for time stamp in (double) sec</span>
<span class="n">ro</span>     <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">range_for_evt</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>      <span class="c1"># (DCRange) range object for psana.Evt object </span>
<span class="n">o</span><span class="o">.</span><span class="n">add_range</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>            <span class="c1"># add (str) of time ranges for ctype.</span>
<span class="n">kr</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">mark_range</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>      <span class="c1"># mark range from the DCType object, returns (str) key or None</span>
<span class="n">kr</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">mark_range_for_key</span><span class="p">(</span><span class="n">keyrange</span><span class="p">)</span><span class="c1"># mark range specified by (str) keyrange from the DCType object, returns (str) key or None</span>
<span class="n">o</span><span class="o">.</span><span class="n">mark_ranges</span><span class="p">()</span>                    <span class="c1"># mark all ranges from the DCType object</span>
<span class="n">o</span><span class="o">.</span><span class="n">clear_ranges</span><span class="p">()</span>                   <span class="c1"># delete all range objects from dictionary.</span>

<span class="n">o</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>                      <span class="c1"># saves object content under h5py.group in the hdf5 file.</span>
<span class="n">o</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>                      <span class="c1"># loads object content from the hdf5 file. </span>
<span class="n">o</span><span class="o">.</span><span class="n">print_obj</span><span class="p">()</span>                      <span class="c1"># print info about this object and its children</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCType.DCType">
<em class="property">class </em><code class="descclassname">DCType.</code><code class="descname">DCType</code><span class="sig-paren">(</span><em>ctype</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCType.html#DCType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCType.DCType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCInterface.DCTypeI</span></code></p>
<p>Class for the Detector Calibration (DC) project</p>
<p>Parameters</p>
<p>ctype : gu.CTYPE - enumerated calibration type
cmt   : str - comment</p>
<dl class="method">
<dt id="DCType.DCType.mark_range">
<code class="descname">mark_range</code><span class="sig-paren">(</span><em>begin</em>, <em>end=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCType.html#DCType.mark_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCType.DCType.mark_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks child object for deletion in save()</p>
</dd></dl>

<dl class="method">
<dt id="DCType.DCType.mark_range_for_key">
<code class="descname">mark_range_for_key</code><span class="sig-paren">(</span><em>keyrng</em>, <em>cmt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCType.html#DCType.mark_range_for_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCType.DCType.mark_range_for_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks child object for deletion in save()</p>
</dd></dl>

<dl class="method">
<dt id="DCType.DCType.mark_ranges">
<code class="descname">mark_ranges</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCType.html#DCType.mark_ranges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCType.DCType.mark_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks all child objects for deletion in save()</p>
</dd></dl>

<dl class="method">
<dt id="DCType.DCType.range_for_evt">
<code class="descname">range_for_evt</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCType.html#DCType.range_for_evt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCType.DCType.range_for_evt" title="Permalink to this definition">¶</a></dt>
<dd><p>Return DCRange object from all available which range validity is matched to the evt time.</p>
</dd></dl>

<dl class="method">
<dt id="DCType.DCType.range_for_tsec">
<code class="descname">range_for_tsec</code><span class="sig-paren">(</span><em>tsec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCType.html#DCType.range_for_tsec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCType.DCType.range_for_tsec" title="Permalink to this definition">¶</a></dt>
<dd><p>Return DCRange object from all available which range validity is matched to tsec.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DCRange"></span><div class="section" id="class-dcrange-for-the-detector-calibration-dc-project">
<h2>Class <a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a> for the Detector Calibration (DC) project<a class="headerlink" href="#class-dcrange-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCRange</span> <span class="k">import</span> <span class="n">DCRange</span>

<span class="c1"># Initialization</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">DCRange</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># Methods</span>
<span class="n">str_range</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">range</span><span class="p">()</span>               <span class="c1"># (str) of the time stamp validity range</span>
<span class="n">t_sec</span>       <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>               <span class="c1"># (double) time stamp beginning validity range</span>
<span class="n">t_sec</span>       <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>                 <span class="c1"># (double) time stamp ending validity range or (str) &#39;end&#39;</span>
<span class="n">dico</span>        <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">versions</span><span class="p">()</span>            <span class="c1"># (list of uint) versions of calibrations</span>
<span class="n">v</span>           <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">vnum_def</span><span class="p">()</span>            <span class="c1"># returns default version number</span>
<span class="n">v</span>           <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">vnum_last</span><span class="p">()</span>           <span class="c1"># returns last version number </span>
<span class="n">vo</span>          <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">version</span><span class="p">(</span><span class="n">vnum</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>    <span class="c1"># returns version object for specified version</span>
<span class="n">ts_in_range</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">tsec_in_range</span><span class="p">(</span><span class="n">tsec</span><span class="p">)</span>   <span class="c1"># (bool) True/False if tsec is/not in the validity range</span>
<span class="n">evt_in_range</span><span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">evt_in_range</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>     <span class="c1"># (bool) True/False if evt is/not in the validity range</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_begin</span><span class="p">(</span><span class="n">tsbegin</span><span class="p">)</span>                  <span class="c1"># set (int) time stamp beginning validity range</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_end</span><span class="p">(</span><span class="n">tsend</span><span class="p">)</span>                      <span class="c1"># set (int) time stamp ending validity range</span>
<span class="n">o</span><span class="o">.</span><span class="n">add_version</span><span class="p">(</span><span class="n">vnum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tsec_prod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nda</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># add object for new version of calibration data</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_vnum_def</span><span class="p">(</span><span class="n">vnum</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>             <span class="c1"># set default version number, if available. vnum=None - use last available.</span>
<span class="n">vd</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">mark_version</span><span class="p">(</span><span class="n">vnum</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>        <span class="c1"># mark version for deletion, returns version number or None if nothing was deleted</span>
<span class="n">o</span><span class="o">.</span><span class="n">mark_versions</span><span class="p">()</span>                     <span class="c1"># mark all registered versions for deletion</span>

<span class="n">o</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>                         <span class="c1"># saves object content under h5py.group in the hdf5 file. </span>
<span class="n">o</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>                         <span class="c1"># loads object content from the hdf5 file. </span>
<span class="n">o</span><span class="o">.</span><span class="n">print_obj</span><span class="p">()</span>                         <span class="c1"># print info about this object and its children</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016-09-23 at Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCRange.DCRange">
<em class="property">class </em><code class="descclassname">DCRange.</code><code class="descname">DCRange</code><span class="sig-paren">(</span><em>begin</em>, <em>end=None</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCRange.html#DCRange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCRange.DCRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCInterface.DCRangeI</span></code></p>
<p>Class for the Detector Calibration (DC) project</p>
<p>Parameters</p>
<ul class="simple">
<li>begin : double - time in sec</li>
<li>end   : double - time in sec or None meaning infinity</li>
<li>cmt   : str - comment</li>
</ul>
<dl class="method">
<dt id="DCRange.DCRange.__cmp__">
<code class="descname">__cmp__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCRange.html#DCRange.__cmp__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCRange.DCRange.__cmp__" title="Permalink to this definition">¶</a></dt>
<dd><p>for comparison in sorted()</p>
</dd></dl>

<dl class="method">
<dt id="DCRange.DCRange.mark_version">
<code class="descname">mark_version</code><span class="sig-paren">(</span><em>vnum=None</em>, <em>cmt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCRange.html#DCRange.mark_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCRange.DCRange.mark_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks child object for deletion in save()</p>
</dd></dl>

<dl class="method">
<dt id="DCRange.DCRange.mark_versions">
<code class="descname">mark_versions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCRange.html#DCRange.mark_versions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCRange.DCRange.mark_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks all child objects for deletion in save()</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="DCRange.key">
<code class="descclassname">DCRange.</code><code class="descname">key</code><span class="sig-paren">(</span><em>begin</em>, <em>end=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCRange.html#key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCRange.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return range as a string,
ex.: 1471285222-1471285555 or 1471285222-end from double time like 1471285222.123456</p>
</dd></dl>

</div>
<span class="target" id="module-DCVersion"></span><div class="section" id="class-dcversion-for-the-detector-calibration-dc-project">
<h2>Class <a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a> for the Detector Calibration (DC) project<a class="headerlink" href="#class-dcversion-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCVersion</span> <span class="k">import</span> <span class="n">DCVersion</span>

<span class="c1"># Initialization</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">DCVersion</span><span class="p">(</span><span class="n">vnum</span><span class="p">,</span> <span class="n">tsprod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># Methods</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_vnum</span><span class="p">(</span><span class="n">vnum</span><span class="p">)</span>            <span class="c1"># sets (int) version </span>
<span class="n">o</span><span class="o">.</span><span class="n">set_tsprod</span><span class="p">(</span><span class="n">tsprod</span><span class="p">)</span>        <span class="c1"># sets (double) time stamp of the version production</span>
<span class="n">o</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>            <span class="c1"># sets (str or np.array) calibration data</span>
<span class="n">vnum</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">vnum</span><span class="p">()</span>           <span class="c1"># returns (int) version number</span>
<span class="n">s_vnum</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">str_vnum</span><span class="p">()</span>       <span class="c1"># returns (str) version number</span>
<span class="n">tsvers</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">tsprod</span><span class="p">()</span>         <span class="c1"># returns (double) time stamp of the version production</span>
<span class="n">data</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>           <span class="c1"># returns (np.array) calibration array</span>
<span class="n">o</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>               <span class="c1"># saves object content under h5py.group in the hdf5 file. </span>
<span class="n">o</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>               <span class="c1"># loads object content from the h5py.group of hdf5 file. </span>
<span class="n">o</span><span class="o">.</span><span class="n">print_obj</span><span class="p">()</span>               <span class="c1"># print info about this object.</span>

<span class="c1"># and all methods inherited from PSCalib.DCBase</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCVersion.DCVersion">
<em class="property">class </em><code class="descclassname">DCVersion.</code><code class="descname">DCVersion</code><span class="sig-paren">(</span><em>vnum</em>, <em>tsprod=None</em>, <em>arr=None</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCVersion.html#DCVersion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCVersion.DCVersion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCInterface.DCVersionI</span></code></p>
<p>Class for the Detector Calibration (DC) project</p>
<blockquote>
<div>Parameters</div></blockquote>
<p>vnum : int - version number</p>
<p>tsprod : double - time in sec</p>
<p>arr : numpy.array - array of constants to save</p>
<p>cmt : str - comment</p>
</dd></dl>

</div>
<span class="target" id="module-DCInterface"></span><div class="section" id="dcinterface-abstract-interface-for-the-detector-calibration-dc-project">
<h2><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a> - abstract interface for the Detector Calibration (DC) project<a class="headerlink" href="#dcinterface-abstract-interface-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCInterface.DCRangeI">
<em class="property">class </em><code class="descclassname">DCInterface.</code><code class="descname">DCRangeI</code><span class="sig-paren">(</span><em>begin</em>, <em>end</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCInterface.html#DCRangeI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCInterface.DCRangeI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCBase.DCBase</span></code></p>
<p>Abstract interface class for the Detector Calibration (DC) project</p>
<p>o = DCRangeI(begin, end)</p>
<p>tsbegin     = o.begin()               # (int) time stamp beginning validity range
tsend       = o.end()                 # (int) time stamp ending validity range
dico        = o.versions()            # (list of uint) versions of calibrations
vnum        = o.vnum_def()            # (DCVersion ~ h5py.Group) reference to the default version in the time-range object
vo          = o.version(vers)         # (DCVersion ~ h5py.Group) specified version in the time-range object
bool        = o.tsec_in_range(tsec)   # (bool) True/False if tsec is/not in the validity range
bool        = o.evt_in_range(evt)     # (bool) True/False if evt is/not in the validity range
o.set_begin(tsbegin)                  # set (int) time stamp beginning validity range
o.set_end(tsend)                      # set (int) time stamp ending validity range
o.add_version(vers)                   # set (DCVersion ~ h5py.Group) versions of calibrations
o.set_versdef(vers)                   # set (DCVersion ~ h5py.Group) versions of calibrations
vnum = o.mark_version(vers)           # del version 
o.mark_versions()                     # del all registered versions</p>
</dd></dl>

<dl class="class">
<dt id="DCInterface.DCStoreI">
<em class="property">class </em><code class="descclassname">DCInterface.</code><code class="descname">DCStoreI</code><span class="sig-paren">(</span><em>fname</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCInterface.html#DCStoreI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCInterface.DCStoreI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCBase.DCBase</span></code></p>
<p>Abstract interface class for the Detector Calibration (DC) project</p>
<p>cs = DCStoreI(fname)</p>
<p>tscfile     = cs.tscfile()               # (int) time stamp of the file creation
dettype     = cs.dettype()               # (str) detector type
detid       = cs.detid()                 # (str) detector id
detname     = cs.detname()               # (str) detector name of self object
predecessor = cs.predecessor()           # (str) detname of predecessor or None
successor   = cs.successor()             # (str) detname of successor or None
ctypes      = cs.ctypes()                # (list) calibration types in the file
cto         = cs.ctypeobj(ctype)         # (DCType ~ h5py.Group) calibration type object</p>
<p>cs.set_tscfile(ts)                       # set (int) time stamp of the file creation 
cs.set_dettype(dettype)                  # set (str) detector type
cs.set_detid(detid)                      # set (str) detector id
cs.set_detname(detname)                  # set (str) detector name of self object
cs.set_predecessor(pred)                 # set (str) detname of predecessor or None
cs.set_successor(succ)                   # set (str) detname of successor or None
cs.add_ctype(ctype)                      # add (str) calibration type to the DCStore object
ct = cs.mark_ctype(ctype)                # mark ctype (str) from the DCStore object, returns (str) ctype or None
cs.mark_ctypes()                         # mark all ctypes from the DCStore object
cs.clear_ctypes(ctype)                   # clear dictionary of ctypes in the DCStore object
cs.save(path, mode)                      # save current calibration in the file specified by path, if path is Null - update current file.
cs.load(path)                            # load content of the file in DCStore object</p>
</dd></dl>

<dl class="class">
<dt id="DCInterface.DCTypeI">
<em class="property">class </em><code class="descclassname">DCInterface.</code><code class="descname">DCTypeI</code><span class="sig-paren">(</span><em>ctype</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCInterface.html#DCTypeI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCInterface.DCTypeI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCBase.DCBase</span></code></p>
<p>Abstract interface class for the Detector Calibration (DC) project</p>
<p>cto = DCTypeI(type)</p>
<p>ctype       = cto.ctype()                # (str) of ctype name
ranges      = cto.ranges()               # (list) of time ranges for ctype
ro          = cto.rangeobj(begin, end)   # (DCRange ~ h5py.Group) time stamp validity range object
ro          = cto.range_for_tsec(tsec)   # (DCRange) range object for time stamp in (double) sec
ro          = cto.range_for_evt(evt)     # (DCRange) range object for psana.Evt object 
cto.add_range(tsr)                       # add (str) of time ranges for ctype
keyr = cto.mark_range(begin, end)        # mark range from the DCType object
keyr = cto.mark_range_for_key(keyr)      # mark range from the DCType object
cto.mark_ranges(tsr)                     # mark all ranges from the DCType object
cto.print_obj()</p>
</dd></dl>

<dl class="class">
<dt id="DCInterface.DCVersionI">
<em class="property">class </em><code class="descclassname">DCInterface.</code><code class="descname">DCVersionI</code><span class="sig-paren">(</span><em>vnum</em>, <em>tsprod=None</em>, <em>arr=None</em>, <em>cmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCInterface.html#DCVersionI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCInterface.DCVersionI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">PSCalib.DCBase.DCBase</span></code></p>
<p>Abstract interface class for the Detector Calibration (DC) project</p>
<p>o = DCVersionI(vnum, tsprod=None, arr=None)</p>
<p>o.set_vnum(vnum)            # sets (int) version 
o.set_tsprod(tsprod)        # sets (double) time stamp of the version production
o.add_data(nda)             # sets (np.array) calibration array
vnum   = o.vnum()           # returns (int) version number
s_vnum = o.str_vnum()       # returns (str) version number
tsvers = o.tsprod()         # returns (double) time stamp of the version production
nda    = o.data()           # returns (np.array) calibration array
o.save(group)               # saves object content under h5py.group in the hdf5 file. 
o.load(group)               # loads object content from the h5py.group of hdf5 file.</p>
</dd></dl>

</div>
<span class="target" id="module-DCFileName"></span><div class="section" id="class-dcfilename-file-name-object-for-detector-calibration-store-dcs-project">
<h2>Class <a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a> - file name object for Detector Calibration Store (DCS) project<a class="headerlink" href="#class-dcfilename-file-name-object-for-detector-calibration-store-dcs-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCFileName</span> <span class="k">import</span> <span class="n">DCFileName</span>

<span class="c1"># Instatiation</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">DCFileName</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="s1">&#39;Epix&#39;</span><span class="p">,</span> <span class="n">calibdir</span><span class="o">=</span><span class="s1">&#39;path-to/calib&#39;</span><span class="p">)</span>
<span class="c1"># Methods</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_dettype</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
<span class="n">o</span><span class="o">.</span><span class="n">set_detid</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">make_path_to_calib_file</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mi">0770</span><span class="p">)</span>

<span class="n">dt</span>    <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">dettype</span><span class="p">()</span>              <span class="c1"># e.g., epix100a</span>
<span class="n">did</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">detid</span><span class="p">()</span>                <span class="c1"># e.g., 3925868555</span>
<span class="n">dn</span>    <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">detname</span><span class="p">()</span>              <span class="c1"># e.g., epix100a-3925868555</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calib_file_name</span><span class="p">()</span>      <span class="c1"># e.g., epix100a-3925868555.h5</span>
<span class="n">fdir</span>  <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calib_file_dir</span><span class="p">()</span>       <span class="c1"># e.g., /reg/neh/home4/dubrovin/LCLS/rel-calib/calib</span>
<span class="n">fpath</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calib_file_path</span><span class="p">()</span>      <span class="c1"># e.g., /reg/neh/home4/dubrovin/LCLS/rel-calib/calib/epix100a/epix100a-3925868555.h5</span>
<span class="n">fdir</span>  <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calib_file_dir_repo</span><span class="p">()</span>  <span class="c1"># e.g., /reg/d/psdm/detector/calib/epix100a/</span>
<span class="n">fpath</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">calib_file_path_repo</span><span class="p">()</span> <span class="c1"># e.g., /reg/d/psdm/detector/calib/epix100a/epix100a-3925868555.h5</span>
<span class="n">o</span><span class="o">.</span><span class="n">print_attrs</span><span class="p">()</span> <span class="c1"># print attributes</span>
<span class="n">o</span><span class="o">.</span><span class="n">log_attrs</span><span class="p">()</span>  <span class="c1"># dump attributes in the logger</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">str_attrs</span><span class="p">()</span> <span class="c1"># returns a string of attributes</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCFileName.DCFileName">
<em class="property">class </em><code class="descclassname">DCFileName.</code><code class="descname">DCFileName</code><span class="sig-paren">(</span><em>env</em>, <em>src</em>, <em>calibdir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName" title="Permalink to this definition">¶</a></dt>
<dd><p>File name generator object for Detector Calibration Store (DCS) project.</p>
<p>Parameters</p>
<p>evt : psana.Event -&gt; event time
src : str - source short/full name, alias or full
calibdir : str - fallback path to calib dir (if xtc file is copied - calib and experiment name are lost)</p>
<dl class="method">
<dt id="DCFileName.DCFileName.calib_file_dir">
<code class="descname">calib_file_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.calib_file_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.calib_file_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns file directory name, e.g.: …/calib/epix100a/</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.calib_file_dir_repo">
<code class="descname">calib_file_dir_repo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.calib_file_dir_repo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.calib_file_dir_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns repository directory, e.g.: /reg/d/psdm/detector/calib/epix100a/</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.calib_file_name">
<code class="descname">calib_file_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.calib_file_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.calib_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns file name, e.g.: epix100a-3925868555.h5</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.calib_file_path">
<code class="descname">calib_file_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.calib_file_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.calib_file_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns path to the file, e.g.: …/calib/epix100a/epix100a-3925868555.h5</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.calib_file_path_repo">
<code class="descname">calib_file_path_repo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.calib_file_path_repo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.calib_file_path_repo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns path to the file in repository, e.g.: /reg/d/…/calib/epix100a/epix100a-3925868555.h5</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.detid">
<code class="descname">detid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.detid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.detid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detector id, e.g.: 3925868555</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.detname">
<code class="descname">detname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.detname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.detname" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detector name, e.g.: epix100a-3925868555</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.dettype">
<code class="descname">dettype</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.dettype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.dettype" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detector id, e.g.: epix100a</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.make_path_to_calib_file">
<code class="descname">make_path_to_calib_file</code><span class="sig-paren">(</span><em>depth=2</em>, <em>mode=509</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.make_path_to_calib_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.make_path_to_calib_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates path beginning from calib directory, e.g.: …/calib/epix100a/
Returns True if path created and exists.</p>
</dd></dl>

<dl class="method">
<dt id="DCFileName.DCFileName.path_to_data">
<code class="descname">path_to_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCFileName.html#DCFileName.path_to_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCFileName.DCFileName.path_to_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns path to data from env ‘SIT_PSDM_DATA’ else ‘/reg/d/psdm’</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DCDetectorId"></span><div class="section" id="class-dcdetectorid-for-the-detector-calibration-dc-project">
<h2>Class <a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a> for the Detector Calibration (DC) project<a class="headerlink" href="#class-dcdetectorid-for-the-detector-calibration-dc-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCDetectorId</span> <span class="k">import</span> <span class="n">id_epix</span><span class="p">,</span> <span class="n">id_cspad</span>

<span class="c1"># Parameters</span>
<span class="n">dsn</span> <span class="o">=</span> <span class="s1">&#39;exp=cxif5315:run=169&#39;</span>
<span class="c1"># or</span>
<span class="n">dsn</span> <span class="o">=</span> <span class="s1">&#39;/reg/g/psdm/detector/data_test/types/0003-CxiDs2.0-Cspad.0-fiber-data.xtc&#39;</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">dsn</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">env</span><span class="p">()</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">psana</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s1">&#39;CxiDs2.0:Cspad.0&#39;</span><span class="p">)</span> <span class="c1"># or unique portion of the name &#39;:Cspad.&#39; or alias &#39;DsaCsPad&#39;</span>

<span class="c1"># Access methods</span>
<span class="n">ide</span> <span class="o">=</span> <span class="n">id_epix</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
<span class="n">idc</span> <span class="o">=</span> <span class="n">id_cspad</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="function">
<dt id="DCDetectorId.id_cspad">
<code class="descclassname">DCDetectorId.</code><code class="descname">id_cspad</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCDetectorId.html#id_cspad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCDetectorId.id_cspad" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detector full name for any src, e.g., XppGon.0:Cspad2x2.0</p>
</dd></dl>

<dl class="function">
<dt id="DCDetectorId.id_det_noid">
<code class="descclassname">DCDetectorId.</code><code class="descname">id_det_noid</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCDetectorId.html#id_det_noid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCDetectorId.id_det_noid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detector full name for any src, e.g., XppGon.0:Cspad2x2.0</p>
</dd></dl>

<dl class="function">
<dt id="DCDetectorId.id_epix">
<code class="descclassname">DCDetectorId.</code><code class="descname">id_epix</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCDetectorId.html#id_epix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCDetectorId.id_epix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Epix100 Id as a string, e.g., 3925999616-0996663297-3791650826-1232098304-0953206283-2655595777-0520093719</p>
</dd></dl>

</div>
<span class="target" id="module-DCConfigParameters"></span><div class="section" id="dcconfigparameters-class-supporting-configuration-parameters-for-application">
<h2><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a> - class supporting configuration parameters for application<a class="headerlink" href="#dcconfigparameters-class-supporting-configuration-parameters-for-application" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.
Created: 2016-05-17 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="DCConfigParameters.DCConfigParameters">
<em class="property">class </em><code class="descclassname">DCConfigParameters.</code><code class="descname">DCConfigParameters</code><span class="sig-paren">(</span><em>fname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCConfigParameters.html#DCConfigParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCConfigParameters.DCConfigParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">CalibManager.ConfigParameters.ConfigParameters</span></code></p>
<p>A storage of configuration parameters for Detector Calibration Store (DCS) project.</p>
<dl class="method">
<dt id="DCConfigParameters.DCConfigParameters.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>fname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCConfigParameters.html#DCConfigParameters.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCConfigParameters.DCConfigParameters.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor.
- fname the file name with configuration parameters, if not specified then default value.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-DCEmail"></span><div class="section" id="dcemail-class-for-detector-calibration-store-dcs-project">
<h2><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a> - class for Detector Calibration Store (DCS) project<a class="headerlink" href="#dcemail-class-for-detector-calibration-store-dcs-project" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.DCEmail</span> <span class="k">import</span> <span class="n">send_text_email</span>

<span class="c1"># Send message via e-mail</span>
<span class="n">send_text_email</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;Text message&#39;</span><span class="p">,</span>               <span class="n">subject</span><span class="o">=</span><span class="s1">&#39;Text subject&#39;</span><span class="p">,</span>               <span class="n">email_from</span><span class="o">=</span><span class="s1">&#39;do-not-reply@slac.stanford.edu&#39;</span><span class="p">,</span>               <span class="n">email_to</span><span class="o">=</span><span class="s1">&#39;do-not-send@slac.stanford.edu&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="function">
<dt id="DCEmail.send_text_email">
<code class="descclassname">DCEmail.</code><code class="descname">send_text_email</code><span class="sig-paren">(</span><em>msg=None</em>, <em>subject=None</em>, <em>email_from=None</em>, <em>email_to=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCEmail.html#send_text_email"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCEmail.send_text_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends e-mail.</p>
</dd></dl>

</div>
<span class="target" id="module-DCLogger"></span><div class="section" id="class-dclogger-logger-for-detector-calibration-store">
<h2>Class <a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a> - logger for Detector Calibration Store<a class="headerlink" href="#class-dclogger-logger-for-detector-calibration-store" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016-05-17 by Mikhail Dubrovin</p>
</div>
<span class="target" id="module-DCUtils"></span><div class="section" id="class-dcutils-contains-a-set-of-utilities">
<h2>Class <a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a> contains a set of utilities<a class="headerlink" href="#class-dcutils-contains-a-set-of-utilities" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">import</span> <span class="nn">PSCalib.DCUtils</span> <span class="k">as</span> <span class="nn">gu</span>

<span class="c1"># Methods</span>
<span class="c1"># Get string with time stamp, ex: 2016-01-26T10:40:53</span>
<span class="n">ts</span>    <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">str_tstamp</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S&#39;</span><span class="p">,</span> <span class="n">time_sec</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">usr</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_enviroment</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="s1">&#39;USER&#39;</span><span class="p">)</span>
<span class="n">usr</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_login</span><span class="p">()</span>
<span class="n">host</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_hostname</span><span class="p">()</span>
<span class="n">cwd</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_cwd</span><span class="p">()</span>
<span class="n">gu</span><span class="o">.</span><span class="n">create_directory</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0775</span><span class="p">)</span>
<span class="n">gu</span><span class="o">.</span><span class="n">create_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0775</span><span class="p">)</span>
<span class="n">gu</span><span class="o">.</span><span class="n">save_string_as_dset</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="n">src</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">source_full_name</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
<span class="n">dtype</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">dettype_from_str_source</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>

<span class="n">src</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">string_from_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="c1"># source is psana.Source object or string like</span>
                                      <span class="c1"># &#39;CxiDs2.0:Cspad.0&#39; from &#39;DetInfo(CxiDs2.0:Cspad.0)&#39;</span>
<span class="n">dname</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">detector_full_name</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">psana_source</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">srcpar</span><span class="p">)</span>
<span class="n">fid</span>    <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">evt_fiducials</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="n">t_sec</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">evt_time</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
<span class="n">t_sec</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">env_time</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>

<span class="c1"># methods for HDF5 </span>
<span class="n">sg</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_subgroup</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="n">subgr_name</span><span class="p">)</span>
<span class="n">gu</span><span class="o">.</span><span class="n">delete_object</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="n">oname</span><span class="p">)</span>
<span class="n">gu</span><span class="o">.</span><span class="n">save_object_as_dset</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-DCStore" title="DCStore"><code class="xref py py-class docutils literal"><span class="pre">DCStore</span></code></a></li>
<li><a class="reference internal" href="#module-DCType" title="DCType"><code class="xref py py-class docutils literal"><span class="pre">DCType</span></code></a></li>
<li><a class="reference internal" href="#module-DCRange" title="DCRange"><code class="xref py py-class docutils literal"><span class="pre">DCRange</span></code></a></li>
<li><a class="reference internal" href="#module-DCVersion" title="DCVersion"><code class="xref py py-class docutils literal"><span class="pre">DCVersion</span></code></a></li>
<li><a class="reference internal" href="#module-DCBase" title="DCBase"><code class="xref py py-class docutils literal"><span class="pre">DCBase</span></code></a></li>
<li><a class="reference internal" href="#module-DCInterface" title="DCInterface"><code class="xref py py-class docutils literal"><span class="pre">DCInterface</span></code></a></li>
<li><a class="reference internal" href="#module-DCUtils" title="DCUtils"><code class="xref py py-class docutils literal"><span class="pre">DCUtils</span></code></a></li>
<li><a class="reference internal" href="#module-DCDetectorId" title="DCDetectorId"><code class="xref py py-class docutils literal"><span class="pre">DCDetectorId</span></code></a></li>
<li><a class="reference internal" href="#module-DCConfigParameters" title="DCConfigParameters"><code class="xref py py-class docutils literal"><span class="pre">DCConfigParameters</span></code></a></li>
<li><a class="reference internal" href="#module-DCFileName" title="DCFileName"><code class="xref py py-class docutils literal"><span class="pre">DCFileName</span></code></a></li>
<li><a class="reference internal" href="#module-DCLogger" title="DCLogger"><code class="xref py py-class docutils literal"><span class="pre">DCLogger</span></code></a></li>
<li><a class="reference internal" href="#module-DCMethods" title="DCMethods"><code class="xref py py-class docutils literal"><span class="pre">DCMethods</span></code></a></li>
<li><a class="reference internal" href="#module-DCEmail" title="DCEmail"><code class="xref py py-class docutils literal"><span class="pre">DCEmail</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2016 by Mikhail Dubrovin</p>
<dl class="function">
<dt id="DCUtils.delete_object">
<code class="descclassname">DCUtils.</code><code class="descname">delete_object</code><span class="sig-paren">(</span><em>grp</em>, <em>oname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#delete_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.delete_object" title="Permalink to this definition">¶</a></dt>
<dd><p>For hdf5: removes object from group.</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.detector_full_name">
<code class="descclassname">DCUtils.</code><code class="descname">detector_full_name</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#detector_full_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.detector_full_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns full detector name like ‘XppGon.0:Cspad2x2.0’ for short src, alias src, or psana.Source.</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.dettype_from_str_source">
<code class="descclassname">DCUtils.</code><code class="descname">dettype_from_str_source</code><span class="sig-paren">(</span><em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#dettype_from_str_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.dettype_from_str_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the detector type from full psana source name (Ex.: Cspad2x2 from DetInfo(XppGon.0:Cspad2x2.0)</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.env_time">
<code class="descclassname">DCUtils.</code><code class="descname">env_time</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#env_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.env_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns event (double) time for input psana.Env object.</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.evt_fiducials">
<code class="descclassname">DCUtils.</code><code class="descname">evt_fiducials</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#evt_fiducials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.evt_fiducials" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns event fiducials.</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.evt_time">
<code class="descclassname">DCUtils.</code><code class="descname">evt_time</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#evt_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.evt_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns event (double) time for input psana.Event object.</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.get_cwd">
<code class="descclassname">DCUtils.</code><code class="descname">get_cwd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#get_cwd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.get_cwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns current working directory</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.get_enviroment">
<code class="descclassname">DCUtils.</code><code class="descname">get_enviroment</code><span class="sig-paren">(</span><em>env='USER'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#get_enviroment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.get_enviroment" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of specified by string name environment variable</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.get_hostname">
<code class="descclassname">DCUtils.</code><code class="descname">get_hostname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#get_hostname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.get_hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns login name</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.get_login">
<code class="descclassname">DCUtils.</code><code class="descname">get_login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#get_login"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.get_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns login name</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.get_subgroup">
<code class="descclassname">DCUtils.</code><code class="descname">get_subgroup</code><span class="sig-paren">(</span><em>grp</em>, <em>subgr_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#get_subgroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.get_subgroup" title="Permalink to this definition">¶</a></dt>
<dd><p>For hdf5:
returns subgroup of the group if it exists or creates and returns new subgroup</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.par_to_tsec">
<code class="descclassname">DCUtils.</code><code class="descname">par_to_tsec</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#par_to_tsec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.par_to_tsec" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if par is float or assumes that it is psana.Event and returns event time in (float) sec or None.</p>
<p>Parameters</p>
<ul class="simple">
<li>par   : psana.Event | psana.Env | float - tsec event time | None</li>
</ul>
<p>Returns</p>
<p>event time in (float) sec or None.</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.psana_source">
<code class="descclassname">DCUtils.</code><code class="descname">psana_source</code><span class="sig-paren">(</span><em>env</em>, <em>srcpar</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#psana_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.psana_source" title="Permalink to this definition">¶</a></dt>
<dd><p>returns psana.Source(src) from other psana.Source brief src or alias.</p>
<p>Parameters</p>
<ul class="simple">
<li>srcpar  : str  - regular source or its alias, ex.: ‘XppEndstation.0:Rayonix.0’ or ‘rayonix’</li>
<li>set_sub : bool - default=True - propagates source parameter to low level package</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="DCUtils.save_object_as_dset">
<code class="descclassname">DCUtils.</code><code class="descname">save_object_as_dset</code><span class="sig-paren">(</span><em>grp</em>, <em>name</em>, <em>shape=None</em>, <em>dtype=None</em>, <em>data=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#save_object_as_dset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.save_object_as_dset" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves object as h5py dataset</p>
<p>Currently supports scalar int, double, string and numpy.array</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.save_string_as_dset">
<code class="descclassname">DCUtils.</code><code class="descname">save_string_as_dset</code><span class="sig-paren">(</span><em>grp</em>, <em>name</em>, <em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#save_string_as_dset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.save_string_as_dset" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns the h5py dataset object with name for single string s</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.source_full_name">
<code class="descclassname">DCUtils.</code><code class="descname">source_full_name</code><span class="sig-paren">(</span><em>env</em>, <em>src</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#source_full_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.source_full_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns full name like ‘DetInfo(XppGon.0:Cspad2x2.0)’ of the brief source or its alias
using env.configStore().keys()</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.str_tstamp">
<code class="descclassname">DCUtils.</code><code class="descname">str_tstamp</code><span class="sig-paren">(</span><em>fmt='%Y-%m-%dT%H:%M:%S'</em>, <em>time_sec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#str_tstamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.str_tstamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string timestamp for specified format and time in sec or current time by default</p>
</dd></dl>

<dl class="function">
<dt id="DCUtils.string_from_source">
<code class="descclassname">DCUtils.</code><code class="descname">string_from_source</code><span class="sig-paren">(</span><em>source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/DCUtils.html#string_from_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DCUtils.string_from_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string like ‘CxiDs2.0:Cspad.0’ from ‘DetInfo(CxiDs2.0:Cspad.0)’
or ‘DsaCsPad’ from ‘Source(‘DsaCsPad’)’ form input string or psana.Source object</p>
</dd></dl>

</div>
<span class="target" id="module-CalibFileFinder"></span><div class="section" id="class-calibfilefinder-is-a-python-version-of-calibfilefinder-cpp-finds-calibration-file">
<h2>Class <a class="reference internal" href="#module-CalibFileFinder" title="CalibFileFinder"><code class="xref py py-class docutils literal"><span class="pre">CalibFileFinder</span></code></a> is a python version of CalibFileFinder.cpp - finds calibration file<a class="headerlink" href="#class-calibfilefinder-is-a-python-version-of-calibfilefinder-cpp-finds-calibration-file" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PSCalib.CalibFileFinder</span> <span class="k">import</span> <span class="n">CalibFileFinder</span>

<span class="n">cdir</span>  <span class="o">=</span> <span class="s1">&#39;/reg/d/psdm/CXI/cxi83714/calib/&#39;</span>
<span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;CsPad::CalibV1&#39;</span>   <span class="c1"># optional parameter, if not available will be set for src from dict </span>
<span class="n">src</span>   <span class="o">=</span> <span class="s1">&#39;CxiDs1.0:Cspad.0&#39;</span>
<span class="nb">type</span>  <span class="o">=</span> <span class="s1">&#39;pedestals&#39;</span>
<span class="n">rnum</span>  <span class="o">=</span> <span class="mi">137</span>

<span class="n">cff</span> <span class="o">=</span> <span class="n">CalibFileFinder</span><span class="p">(</span><span class="n">cdir</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0377</span><span class="p">)</span>
<span class="c1">#OR</span>
<span class="n">cff</span> <span class="o">=</span> <span class="n">CalibFileFinder</span><span class="p">(</span><span class="n">cdir</span><span class="p">)</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">cff</span><span class="o">.</span><span class="n">findCalibFile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">rnum</span><span class="p">)</span>

<span class="n">fname_new</span> <span class="o">=</span> <span class="n">cff</span><span class="o">.</span><span class="n">makeCalibFileName</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">run_start</span><span class="p">,</span> <span class="n">run_end</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1">#-----------------------------------------------</span>
<span class="c1"># ALTERNATIVE usage of direct access methods</span>

<span class="kn">from</span> <span class="nn">PSCalib.CalibFileFinder</span> <span class="k">import</span> <span class="n">find_calib_file</span><span class="p">,</span> <span class="n">make_calib_file_name</span>

<span class="n">fname_existing</span> <span class="o">=</span> <span class="n">find_calib_file</span><span class="p">(</span><span class="n">cdir</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">rnum</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fname_new</span>      <span class="o">=</span> <span class="n">make_calib_file_name</span><span class="p">(</span><span class="n">cdir</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">run_start</span><span class="p">,</span> <span class="n">run_end</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#-----------------------------------------------</span>
<span class="c1"># Deploy file or numpy array as a file in the calibration store</span>

<span class="c1"># use optional dictionary of comments to save in the HISTORY and file</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">32</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">388</span><span class="p">))</span>
<span class="n">cmts</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;exp&#39;</span><span class="p">:</span><span class="s1">&#39;cxi12345&#39;</span><span class="p">,</span> <span class="s1">&#39;ifname&#39;</span><span class="p">:</span><span class="s1">&#39;input-file-name&#39;</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span><span class="s1">&#39;my-app-name&#39;</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">:</span><span class="s1">&#39;my-comment&#39;</span><span class="p">}</span>
<span class="n">deploy_calib_array</span><span class="p">(</span><span class="n">cdir</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">run_start</span><span class="p">,</span> <span class="n">run_end</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">cmts</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">cmts</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;exp&#39;</span><span class="p">:</span><span class="s1">&#39;cxi12345&#39;</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span><span class="s1">&#39;my-app-name&#39;</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">:</span><span class="s1">&#39;my-comment&#39;</span><span class="p">}</span>
<span class="n">ifname</span><span class="o">=</span><span class="s1">&#39;path-to-my-own-calibtation-file/file-name.txt&#39;</span>
<span class="n">deploy_calib_file</span><span class="p">(</span><span class="n">cdir</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">run_start</span><span class="p">,</span> <span class="n">run_end</span><span class="p">,</span> <span class="n">ifnameq</span><span class="p">,</span> <span class="n">cmts</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a>, <a class="reference internal" href="#module-NDArrIO" title="NDArrIO"><code class="xref py py-class docutils literal"><span class="pre">NDArrIO</span></code></a></p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="function">
<dt id="CalibFileFinder.deploy_calib_array">
<code class="descclassname">CalibFileFinder.</code><code class="descname">deploy_calib_array</code><span class="sig-paren">(</span><em>cdir</em>, <em>src</em>, <em>type</em>, <em>run_start</em>, <em>run_end=None</em>, <em>arr=None</em>, <em>dcmts={}</em>, <em>fmt='%.1f'</em>, <em>pbits=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CalibFileFinder.html#deploy_calib_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CalibFileFinder.deploy_calib_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Deploys array in calibration file</p>
<ul class="simple">
<li>makes the new file name using make_calib_file_name(…)</li>
<li>if file with this name already exists - rename it with current timestamp in the name</li>
<li>save array in file</li>
<li>add history record</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="CalibFileFinder.deploy_calib_file">
<code class="descclassname">CalibFileFinder.</code><code class="descname">deploy_calib_file</code><span class="sig-paren">(</span><em>cdir</em>, <em>src</em>, <em>type</em>, <em>run_start</em>, <em>run_end=None</em>, <em>ifname=''</em>, <em>dcmts={}</em>, <em>pbits=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CalibFileFinder.html#deploy_calib_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CalibFileFinder.deploy_calib_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Deploys calibration file</p>
<ul class="simple">
<li>makes the new file name using make_calib_file_name(…)</li>
<li>if file with this name already exists - rename it with current timestamp in the name</li>
<li>save array in file</li>
<li>add history record</li>
</ul>
</dd></dl>

</div>
<span class="target" id="module-NDArrIO"></span><div class="section" id="ndarrio-i-o-methods-to-read-write-numpy-array-in-the-text-file">
<h2><a class="reference internal" href="#module-NDArrIO" title="NDArrIO"><code class="xref py py-class docutils literal"><span class="pre">NDArrIO</span></code></a> - i/o methods to read/write numpy array in the text file<a class="headerlink" href="#ndarrio-i-o-methods-to-read-write-numpy-array-in-the-text-file" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.NDArrIO</span> <span class="k">import</span> <span class="n">save_txt</span><span class="p">,</span> <span class="n">load_txt</span><span class="p">,</span> <span class="n">list_of_comments</span>

<span class="c1"># Save n-dimensional numpy array in the text file.</span>
<span class="n">save_txt</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">cmts</span><span class="o">=</span><span class="p">(),</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Load 1-, 2-, n-dimensional array (if metadata available) from file .</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">load_txt</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>    <span class="c1"># this version unpacks data directly in this script</span>
<span class="c1"># or</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">load_txt_v2</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="c1"># v2 uses numpy.loadtxt(...) to load data (~30% slower then the load_txt) </span>

<span class="c1"># Get list of str objects - comment records with &#39;#&#39; in 1st position from file.</span>
<span class="n">cmts</span> <span class="o">=</span> <span class="n">list_of_comments</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

<span class="c1">#------------------------------</span>
<span class="c1"># Example of the file header:</span>
<span class="c1">#------------------------------</span>
<span class="c1"># TITLE      File to load ndarray of calibration parameters</span>
<span class="c1"># </span>
<span class="c1"># EXPERIMENT amo12345</span>
<span class="c1"># DETECTOR   Camp.0:pnCCD.1</span>
<span class="c1"># CALIB_TYPE pedestals</span>

<span class="c1"># DATE_TIME  2014-05-06 15:24:10</span>
<span class="c1"># AUTHOR     &lt;user-login-name&gt;</span>

<span class="c1"># line of comment always begins with # </span>
<span class="c1"># Mandatory fields to define the ndarray&lt;TYPE,NDIM&gt; and its shape as unsigned shape[NDIM] = (DIM1,DIM2,DIM3)</span>
<span class="c1"># DTYPE       float</span>
<span class="c1"># NDIM        3</span>
<span class="c1"># DIM:1       3</span>
<span class="c1"># DIM:2       4</span>
<span class="c1"># DIM:3       8</span>
<span class="c1">#------------------------------</span>
</pre></div>
</div>
<p>See: <code class="xref py py-class docutils literal"><span class="pre">AreaDetector</span></code></p>
<p>For more detail see <a class="reference external" href="https://pswww.slac.stanford.edu/swdoc/releases/ana-current/pyana-ref/html/Detector/#module-Detector.AreaDetector">AreaDetector</a>.</p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
<dl class="function">
<dt id="NDArrIO.list_of_comments">
<code class="descclassname">NDArrIO.</code><code class="descname">list_of_comments</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/NDArrIO.html#list_of_comments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#NDArrIO.list_of_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of str objects - comment records from file.
- fname - file name for text file.</p>
</dd></dl>

<dl class="function">
<dt id="NDArrIO.load_txt">
<code class="descclassname">NDArrIO.</code><code class="descname">load_txt</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/NDArrIO.html#load_txt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#NDArrIO.load_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads n-dimensional numpy array from text file with metadata.
- fname - file name for text file.</p>
</dd></dl>

<dl class="function">
<dt id="NDArrIO.load_txt_v2">
<code class="descclassname">NDArrIO.</code><code class="descname">load_txt_v2</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/NDArrIO.html#load_txt_v2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#NDArrIO.load_txt_v2" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads n-dimensional numpy array from text file with metadata.
- fname - file name for text file.</p>
</dd></dl>

<dl class="function">
<dt id="NDArrIO.save_txt">
<code class="descclassname">NDArrIO.</code><code class="descname">save_txt</code><span class="sig-paren">(</span><em>fname='nda.txt'</em>, <em>arr=None</em>, <em>cmts=()</em>, <em>fmt='%.1f'</em>, <em>verbos=False</em>, <em>addmetad=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/NDArrIO.html#save_txt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#NDArrIO.save_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Save n-dimensional numpy array to text file with metadata.
- fname - file name for text file,
- arr - numpy array,
- cmts -list of comments which will be saved in the file header.</p>
</dd></dl>

</div>
<span class="target" id="module-CalibPars"></span><div class="section" id="calibpars-abstract-interface-for-access-to-calibration-parameters">
<h2><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a> - abstract interface for access to calibration parameters<a class="headerlink" href="#calibpars-abstract-interface-for-access-to-calibration-parameters" title="Permalink to this headline">¶</a></h2>
<p>Methods of this class should be re-implemented in derived classes with name pattern CalibPars&lt;Detector&gt;
for different type of detectore. For example, CSPAD can be implemented in class <code class="xref py py-class docutils literal"><span class="pre">CalibParsCspadV1</span></code>
which enherits from <a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a>, etc.
Currently implementation of this interface for all detectors is done in class <a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a>.
Access to all detectors is available through the factory method in class <a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a>.</p>
<p>Usage of (implemented) interface methods:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PSCalib.CalibPars</span> <span class="k">import</span> <span class="n">CalibPars</span>
<span class="kn">import</span> <span class="nn">PSCalib.GlobalUtils</span> <span class="k">as</span> <span class="nn">gu</span>

<span class="n">cp</span> <span class="o">=</span> <span class="n">CalibPars</span><span class="p">()</span>
<span class="n">cp</span><span class="o">.</span><span class="n">print_attrs</span><span class="p">()</span>

<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pedestals</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_status</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_datast</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_rms</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_gain</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_offset</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_mask</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">pixel_bkgd</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">common_mode</span><span class="p">()</span>

<span class="n">ctype</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">PEDESTALS</span> <span class="c1"># ex.: gu.PIXEL_STATUS, gu.PIXEL_RMS, gu.PIXEL_MASK, etc.</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">ndim</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Methods:</dt>
<dd><ul class="first last simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">print_attrs()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pedestals()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_status()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_datast()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_rms()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_gain()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_offset()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_mask()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">pixel_bkgd()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">common_mode()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">ndim()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">shape()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">size()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">status()</span></code></li>
</ul>
</dd>
<dt>See classes:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsStore"></span><div class="section" id="calibparsstore-a-factory-class-method">
<h2><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a> - a factory class/method<a class="headerlink" href="#calibparsstore-a-factory-class-method" title="Permalink to this headline">¶</a></h2>
<p>Switches between different device-dependent calibration constants using <a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a> interface.</p>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">from</span> <span class="nn">PSCalib.CalibParsStore</span> <span class="k">import</span> <span class="n">cps</span>
<span class="kn">from</span> <span class="nn">PSCalib.GlobalUtils</span> <span class="k">import</span> <span class="o">*</span>

<span class="c1"># Initialization</span>
<span class="n">calibdir</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">calibDir</span><span class="p">()</span>  <span class="c1"># or e.g. &#39;/reg/d/psdm/&lt;INS&gt;/&lt;experiment&gt;/calib&#39;</span>
<span class="n">group</span> <span class="o">=</span> <span class="kc">None</span>               <span class="c1"># or e.g. &#39;CsPad::CalibV1&#39;</span>
<span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;Camp.0:pnCCD.1&#39;</span>
<span class="n">runnum</span> <span class="o">=</span> <span class="mi">10</span>                <span class="c1"># or e.g. evt.run()</span>
<span class="n">pbits</span> <span class="o">=</span> <span class="mi">255</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">cps</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">calibdir</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">runnum</span><span class="p">,</span> <span class="n">pbits</span><span class="p">)</span>

<span class="c1"># or using different list of parameters to access calibration from hdf5 DCS file:</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">cps</span><span class="o">.</span><span class="n">CreateForEvtEnv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">calibdir</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">pbits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Access methods</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pedestals</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_status</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_datast</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_rms</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_mask</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_gain</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_offset</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">pixel_bkgd</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">common_mode</span><span class="p">()</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="n">ctype</span><span class="o">=</span><span class="n">PEDESTALS</span><span class="p">)</span> <span class="c1"># see list of ctypes in :py:class:`GlobalUtils`</span>
<span class="n">shape</span>  <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">size</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">ndim</span>   <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">ndim</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Methods:</dt>
<dd><ul class="first last simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">Create()</span></code></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">CreateForEvtEnv()</span></code></li>
</ul>
</dd>
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.  If you use all or 
part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2013-03-08 by Mikhail Dubrovin</p>
<dl class="class">
<dt id="CalibParsStore.CalibParsStore">
<em class="property">class </em><code class="descclassname">CalibParsStore.</code><code class="descname">CalibParsStore</code><a class="reference internal" href="_modules/CalibParsStore.html#CalibParsStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CalibParsStore.CalibParsStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory class for CalibPars object of different detectors</p>
<dl class="method">
<dt id="CalibParsStore.CalibParsStore.Create">
<code class="descname">Create</code><span class="sig-paren">(</span><em>calibdir</em>, <em>group</em>, <em>source</em>, <em>runnum</em>, <em>pbits=0</em>, <em>fnexpc=None</em>, <em>fnrepo=None</em>, <em>tsec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CalibParsStore.html#CalibParsStore.Create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CalibParsStore.CalibParsStore.Create" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method</p>
<p>Parameters</p>
<ul class="simple">
<li>calibdir : string - calibration directory, ex: /reg/d/psdm/AMO/amoa1214/calib</li>
<li>group    : string - group, ex: PNCCD::CalibV1</li>
<li>source   : string - data source, ex: Camp.0:pnCCD.0</li>
<li>runnum   : int    - run number, ex: 10</li>
<li>pbits=0  : int    - print control bits, ex: 255</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>GenericCalibPars object</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="CalibParsStore.CalibParsStore.CreateForEvtEnv">
<code class="descname">CreateForEvtEnv</code><span class="sig-paren">(</span><em>calibdir</em>, <em>group</em>, <em>source</em>, <em>par</em>, <em>env</em>, <em>pbits=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CalibParsStore.html#CalibParsStore.CreateForEvtEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CalibParsStore.CalibParsStore.CreateForEvtEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method
This method makes access to the calibration store with fallback access to hdf5 file.</p>
<p>Parameters</p>
<ul class="simple">
<li>calibdir : string - calibration directory, ex: /reg/d/psdm/AMO/amoa1214/calib</li>
<li>group    : string - group, ex: PNCCD::CalibV1</li>
<li>source   : string - data source, ex: Camp.0:pnCCD.0</li>
<li>par      : int runnum or psana.Event - is used to get run number</li>
<li>env      : psana.Env   - environment object - is used to retrieve file name to get dataset time to retrieve DCRange</li>
<li>pbits=0  : int         - print control bits, ex: 255</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>GenericCalibPars object</li>
</ul>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-GenericCalibPars"></span><div class="section" id="class-genericcalibpars-implementation-of-calibpars-interface-methods-for-generic-detectors">
<h2>Class <a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a> - implementation of <a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a> interface methods for generic detectors<a class="headerlink" href="#class-genericcalibpars-implementation-of-calibpars-interface-methods-for-generic-detectors" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># THIS CLASS IS NOT SUPPOSED TO BE USED AS SELF-DEPENDENT...</span>
<span class="c1"># USE :py:class:`PSCalib.CalibParsStore`</span>

<span class="kn">from</span> <span class="nn">PSCalib.GenericCalibPars</span> <span class="k">import</span> <span class="n">GenericCalibPars</span>

<span class="kn">from</span> <span class="nn">PSCalib.CalibParsBaseAndorV1</span>     <span class="k">import</span> <span class="n">CalibParsBaseAndorV1</span>    
<span class="kn">from</span> <span class="nn">PSCalib.CalibParsBaseCameraV1</span>    <span class="k">import</span> <span class="n">CalibParsBaseCameraV1</span>   
<span class="kn">from</span> <span class="nn">PSCalib.CalibParsBaseCSPad2x2V1</span>  <span class="k">import</span> <span class="n">CalibParsBaseCSPad2x2V1</span> 
<span class="o">...</span>
<span class="kn">from</span> <span class="nn">PSCalib.CalibParsBasePnccdV1</span>     <span class="k">import</span> <span class="n">CalibParsBasePnccdV1</span>    

<span class="n">cbase</span> <span class="o">=</span> <span class="n">CalibParsBasePnccdV1</span><span class="p">()</span>    

<span class="n">calibdir</span> <span class="o">=</span> <span class="s1">&#39;/reg/d/psdm/CXI/cxif5315/calib&#39;</span>
<span class="n">group</span>    <span class="o">=</span> <span class="s1">&#39;PNCCD::CalibV1&#39;</span>
<span class="n">source</span>   <span class="o">=</span> <span class="s1">&#39;CxiDs2.0:Cspad.0&#39;</span>
<span class="n">runnum</span>   <span class="o">=</span> <span class="mi">60</span>
<span class="n">pbits</span>    <span class="o">=</span> <span class="mi">255</span>
<span class="n">ctype</span>    <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">PEDESTALS</span>

<span class="n">gcp</span> <span class="o">=</span> <span class="n">GenericCalibPars</span><span class="p">(</span><span class="n">cbase</span><span class="p">,</span> <span class="n">calibdir</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">runnum</span><span class="p">,</span> <span class="n">pbits</span><span class="p">)</span>

<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pedestals</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_rms</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_mask</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_bkgd</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_status</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_datast</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_gain</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">pixel_offset</span><span class="p">()</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">common_mode</span><span class="p">()</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">ctype</span><span class="o">=</span><span class="n">PEDESTALS</span><span class="p">)</span> <span class="c1"># see  list of ctypes in :py:class:`PSCalib.GlobalUtils`</span>
<span class="n">shape</span>  <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">get_shape</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">size</span>   <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">get_size</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">ndim</span>   <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">get_ndim</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>

<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">set_version</span><span class="p">(</span><span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">constants_default</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">constants_calib</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">constants_dcs</span><span class="p">(</span><span class="n">ctype</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">nda</span> <span class="o">=</span> <span class="n">gcp</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">ctype</span><span class="p">,</span> <span class="n">vers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a>, <a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">CalibParsCspad2x1V1</span></code>, <a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseAcqirisV1"></span><div class="section" id="calibparsbaseacqirisv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#calibparsbaseacqirisv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseAndor3dV1"></span><div class="section" id="class-calibparsbaseandor3dv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2>Class <a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a> holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#class-calibparsbaseandor3dv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseAndorV1"></span><div class="section" id="calibparsbaseandorv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#calibparsbaseandorv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail S. Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseCameraV1"></span><div class="section" id="class-calibparsbasecamerav1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2>Class <a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#class-calibparsbasecamerav1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseCSPad2x2V1"></span><div class="section" id="calibparsbasecspad2x2v1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#calibparsbasecspad2x2v1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseCSPadV1"></span><div class="section" id="class-calibparsbasecspadv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2>Class <a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a> holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#class-calibparsbasecspadv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseEpix100aV1"></span><div class="section" id="calibparsbaseepix100av1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#calibparsbaseepix100av1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseImpV1"></span><div class="section" id="class-calibparsbaseimpv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2>Class <a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a> holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#class-calibparsbaseimpv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBaseJungfrauV1"></span><div class="section" id="calibparsbasejungfrauv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2><a class="reference internal" href="#module-CalibParsBaseJungfrauV1" title="CalibParsBaseJungfrauV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseJungfrauV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#calibparsbasejungfrauv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBasePnccdV1"></span><div class="section" id="class-calibparsbasepnccdv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2>Class <a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#class-calibparsbasepnccdv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-CalibParsBasePrincetonV1"></span><div class="section" id="calibparsbaseprincetonv1-holds-basic-calibration-metadata-parameters-for-associated-detector">
<h2><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a> - holds basic calibration metadata parameters for associated detector<a class="headerlink" href="#calibparsbaseprincetonv1-holds-basic-calibration-metadata-parameters-for-associated-detector" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#module-GenericCalibPars" title="GenericCalibPars"><code class="xref py py-class docutils literal"><span class="pre">GenericCalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a></li>
<li><a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndorV1" title="CalibParsBaseAndorV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndorV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAndor3dV1" title="CalibParsBaseAndor3dV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAndor3dV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCameraV1" title="CalibParsBaseCameraV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCameraV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPad2x2V1" title="CalibParsBaseCSPad2x2V1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPad2x2V1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseCSPadV1" title="CalibParsBaseCSPadV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseCSPadV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseEpix100aV1" title="CalibParsBaseEpix100aV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseEpix100aV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePnccdV1" title="CalibParsBasePnccdV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePnccdV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBasePrincetonV1" title="CalibParsBasePrincetonV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBasePrincetonV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseAcqirisV1" title="CalibParsBaseAcqirisV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseAcqirisV1</span></code></a></li>
<li><a class="reference internal" href="#module-CalibParsBaseImpV1" title="CalibParsBaseImpV1"><code class="xref py py-class docutils literal"><span class="pre">CalibParsBaseImpV1</span></code></a></li>
</ul>
</dd>
</dl>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Author: Mikhail Dubrovin</p>
</div>
<span class="target" id="module-GlobalUtils"></span><div class="section" id="globalutils-a-set-of-utilities">
<h2><a class="reference internal" href="#module-GlobalUtils" title="GlobalUtils"><code class="xref py py-class docutils literal"><span class="pre">GlobalUtils</span></code></a> - a set of utilities<a class="headerlink" href="#globalutils-a-set-of-utilities" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import</span>
<span class="kn">import</span> <span class="nn">PSCalib.GlobalUtils</span> <span class="k">as</span> <span class="nn">gu</span>

<span class="c1"># Methods</span>
<span class="c1">#resp = gu.&lt;method(pars)&gt;</span>

<span class="n">dettype</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">det_type_from_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<span class="n">detname</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">string_from_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

<span class="n">mmask</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">merge_masks</span><span class="p">(</span><span class="n">mask1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">mask</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">mask_neighbors</span><span class="p">(</span><span class="n">mask_in</span><span class="p">,</span> <span class="n">allnbrs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">lo</span><span class="p">,</span><span class="n">hi</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">evaluate_limits</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">nneg</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">npos</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">lim_lo</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lim_hi</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">verbos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="n">arr2d</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">reshape_nda_to_2d</span><span class="p">(</span><span class="n">nda</span><span class="p">)</span>
<span class="n">arr3d</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">reshape_nda_to_3d</span><span class="p">(</span><span class="n">nda</span><span class="p">)</span>

<span class="c1"># Get string with time stamp, ex: 2016-01-26T10:40:53</span>
<span class="n">ts</span>    <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">str_tstamp</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S&#39;</span><span class="p">,</span> <span class="n">time_sec</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">usr</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_enviroment</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="s1">&#39;USER&#39;</span><span class="p">)</span>
<span class="n">usr</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_login</span><span class="p">()</span>
<span class="n">host</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_hostname</span><span class="p">()</span>
<span class="n">cwd</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_cwd</span><span class="p">()</span>
<span class="n">rec</span>   <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">log_rec_on_start</span><span class="p">()</span> <span class="c1"># e.g. &#39;2017-09-27T10:40:24 user:dubrovin@psanagpu104 cwd:/reg/neh/home4/dubrovin/LCLS/con-jungfrau ...&#39;</span>
<span class="n">gu</span><span class="o">.</span><span class="n">add_rec_to_log</span><span class="p">(</span><span class="n">lfname</span><span class="p">,</span> <span class="n">rec</span><span class="p">,</span> <span class="n">verbos</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">exp</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">exp_name</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="n">cdir</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">calib_dir</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="c1">#### tsec, tnsec, fiducial, tsdate, tstime = gu.time_pars(evt) # needs in psana...</span>

<span class="n">gu</span><span class="o">.</span><span class="n">create_directory</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">gu</span><span class="o">.</span><span class="n">create_directory_with_mode</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0777</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">exists</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">create_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0777</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">arr</span>  <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">load_textfile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">gu</span><span class="o">.</span><span class="n">save_textfile</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="c1"># mode: &#39;w&#39;-write, &#39;a&#39;-append </span>

<span class="n">path</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/path/#YYYY-MM/fname.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;#YYYY-MM&#39;</span><span class="p">,</span> <span class="n">gu</span><span class="o">.</span><span class="n">str_tstamp</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;%Y/%m&#39;</span><span class="p">))</span>

<span class="n">ifname</span> <span class="o">=</span> <span class="s1">&#39;fname.txt&#39;</span>
<span class="n">ctypedir</span> <span class="o">=</span> <span class="s1">&#39;/some-path/calib/Jungfrau::CalibV1/CxiEndstation.0:Jungfrau.0/&#39;</span>
<span class="n">ctype</span> <span class="o">=</span> <span class="s1">&#39;pedestals&#39;</span>
<span class="n">ofname</span> <span class="o">=</span> <span class="s1">&#39;123-end.data&#39;</span>
<span class="n">rec</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">history_record</span><span class="p">(</span><span class="n">ifname</span><span class="p">,</span> <span class="n">ctypedir</span><span class="p">,</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">ofname</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">path_clb</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">path_to_calib_file</span><span class="p">(</span><span class="n">ctypedir</span><span class="p">,</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">ofname</span><span class="p">)</span>
<span class="n">path_his</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">path_to_history_file</span><span class="p">(</span><span class="n">ctypedir</span><span class="p">,</span> <span class="n">ctype</span><span class="p">)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">command_deploy_file</span><span class="p">(</span><span class="n">ifname</span><span class="p">,</span> <span class="n">path_clb</span><span class="p">)</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">command_add_record_to_file</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">path_his</span><span class="p">)</span>

<span class="n">tpl</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">calib_fname_template</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">runnum</span><span class="p">,</span> <span class="n">tsec</span><span class="p">,</span> <span class="n">tnsec</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">tsdate</span><span class="p">,</span> <span class="n">tstime</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">nevts</span><span class="p">,</span> <span class="n">ofname</span><span class="p">)</span>

<span class="n">gu</span><span class="o">.</span><span class="n">deploy_file</span><span class="p">(</span><span class="n">ifname</span><span class="p">,</span> <span class="n">ctypedir</span><span class="p">,</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">ofname</span><span class="p">,</span> <span class="n">lfname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbos</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>See: other methods in <a class="reference internal" href="#module-CalibPars" title="CalibPars"><code class="xref py py-class docutils literal"><span class="pre">CalibPars</span></code></a>, <a class="reference internal" href="#module-CalibParsStore" title="CalibParsStore"><code class="xref py py-class docutils literal"><span class="pre">CalibParsStore</span></code></a></p>
<p>This software was developed for the SIT project.
If you use all or part of it, please give an appropriate acknowledgment.</p>
<p>Created: 2013-03-08 by Mikhail Dubrovin</p>
<dl class="data">
<dt id="GlobalUtils.ZYLA">
<code class="descclassname">GlobalUtils.</code><code class="descname">ZYLA</code><em class="property"> = 27</em><a class="headerlink" href="#GlobalUtils.ZYLA" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumetated detector types</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.add_rec_to_log">
<code class="descclassname">GlobalUtils.</code><code class="descname">add_rec_to_log</code><span class="sig-paren">(</span><em>lfname</em>, <em>rec</em>, <em>verbos=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#add_rec_to_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.add_rec_to_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds record rec to the log file with path lfname. If path does not exist, it is created beginning from depth=5.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.calib_fname_template">
<code class="descclassname">GlobalUtils.</code><code class="descname">calib_fname_template</code><span class="sig-paren">(</span><em>exp</em>, <em>runnum</em>, <em>tsec</em>, <em>tnsec</em>, <em>fid</em>, <em>tsdate</em>, <em>tstime</em>, <em>src</em>, <em>nevts</em>, <em>ofname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#calib_fname_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.calib_fname_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces parts of the file name ofname specified as
#src, #exp, #run, #evts, #type, #date, #time, #fid, #sec, #nsec
with actual values.</p>
<p>RETURNS</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>template (str) - file name template, e.g.: nda-cxi11216-r0009-CxiEndstation.0:Jungfrau.0-e000010-%s.txt,</dt>
<dd>where %s stands for supplied late type.</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.command_add_record_to_file">
<code class="descclassname">GlobalUtils.</code><code class="descname">command_add_record_to_file</code><span class="sig-paren">(</span><em>rec</em>, <em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#command_add_record_to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.command_add_record_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns command to add record to file.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.command_deploy_file">
<code class="descclassname">GlobalUtils.</code><code class="descname">command_deploy_file</code><span class="sig-paren">(</span><em>ifname</em>, <em>ofname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#command_deploy_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.command_deploy_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns command to deploys file with calibration constants in the calib store.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.create_directory_with_mode">
<code class="descclassname">GlobalUtils.</code><code class="descname">create_directory_with_mode</code><span class="sig-paren">(</span><em>dir</em>, <em>mode=511</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#create_directory_with_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.create_directory_with_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates directory and sets its mode</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.create_path">
<code class="descclassname">GlobalUtils.</code><code class="descname">create_path</code><span class="sig-paren">(</span><em>path</em>, <em>depth=6</em>, <em>mode=511</em>, <em>verb=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#create_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.create_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates missing path of specified depth from the beginning
e.g. for ‘/reg/g/psdm/logs/calibman/2016/07/log-file-name.txt’
or ‘/reg/d/psdm/cxi/cxi11216/calib/Jungfrau::CalibV1/CxiEndstation.0:Jungfrau.0/pedestals/9-end.data’</p>
<p>Returns True if path to file exists, False othervise</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.deploy_file">
<code class="descclassname">GlobalUtils.</code><code class="descname">deploy_file</code><span class="sig-paren">(</span><em>ifname</em>, <em>ctypedir</em>, <em>ctype</em>, <em>ofname</em>, <em>lfname=None</em>, <em>verbos=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#deploy_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.deploy_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Deploys file with calibration constants in the calib store, adds history record in file and in logfile.</p>
<p>Parameters</p>
<ul class="simple">
<li>ifname : str - input file name, e.g.: ‘fname.txt’</li>
<li>ctypedir : str - path to calibtype directory, e.g. ‘/some-path/calib/Jungfrau::CalibV1/CxiEndstation.0:Jungfrau.0/’</li>
<li>ctype : str - calibration type, e.g.: ‘pedestals’</li>
<li>ofname : str - output file name, e.g.: ‘123-end.data’</li>
<li>lfname : str - log file path or None, to add history record</li>
<li>verbos : bool - verbosity</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.det_type_from_source">
<code class="descclassname">GlobalUtils.</code><code class="descname">det_type_from_source</code><span class="sig-paren">(</span><em>source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#det_type_from_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.det_type_from_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns enumerated detector type for string source</p>
</dd></dl>

<dl class="data">
<dt id="GlobalUtils.dic_det_type_to_calib_group">
<code class="descclassname">GlobalUtils.</code><code class="descname">dic_det_type_to_calib_group</code><em class="property"> = {0: 'UNDEFINED', 1: 'CsPad::CalibV1', 2: 'CsPad2x2::CalibV1', 3: 'Princeton::CalibV1', 4: 'PNCCD::CalibV1', 5: 'Camera::CalibV1', 6: 'Camera::CalibV1', 7: 'Camera::CalibV1', 8: 'Camera::CalibV1', 9: 'Camera::CalibV1', 10: 'Camera::CalibV1', 11: 'Epix::CalibV1', 12: 'Epix10k::CalibV1', 13: 'Epix100a::CalibV1', 14: 'Camera::CalibV1', 15: 'Andor::CalibV1', 16: 'Acqiris::CalibV1', 17: 'Imp::CalibV1', 18: 'Camera::CalibV1', 19: 'Camera::CalibV1', 20: 'EvrData::CalibV1', 21: 'Camera::CalibV1', 22: 'Timepix::CalibV1', 23: 'Fli::CalibV1', 24: 'Pimax::CalibV1', 25: 'Andor3d::CalibV1', 26: 'Jungfrau::CalibV1', 27: 'Camera::CalibV1'}</em><a class="headerlink" href="#GlobalUtils.dic_det_type_to_calib_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary for detector type : group</p>
</dd></dl>

<dl class="data">
<dt id="GlobalUtils.dic_det_type_to_name">
<code class="descclassname">GlobalUtils.</code><code class="descname">dic_det_type_to_name</code><em class="property"> = {0: 'UNDEFINED', 1: 'Cspad', 2: 'Cspad2x2', 3: 'Princeton', 4: 'pnCCD', 5: 'Tm6740', 6: 'Opal1000', 7: 'Opal2000', 8: 'Opal4000', 9: 'Opal8000', 10: 'OrcaFl40', 11: 'Epix', 12: 'Epix10k', 13: 'Epix100a', 14: 'Fccd960', 15: 'Andor', 16: 'Acqiris', 17: 'Imp', 18: 'Quartz4A150', 19: 'Rayonix', 20: 'Evr', 21: 'Fccd', 22: 'Timepix', 23: 'Fli', 24: 'Pimax', 25: 'Andor3d', 26: 'Jungfrau', 27: 'Zyla'}</em><a class="headerlink" href="#GlobalUtils.dic_det_type_to_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary for detector type : name</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.evaluate_limits">
<code class="descclassname">GlobalUtils.</code><code class="descname">evaluate_limits</code><span class="sig-paren">(</span><em>arr</em>, <em>nneg=5</em>, <em>npos=5</em>, <em>lim_lo=1</em>, <em>lim_hi=1000</em>, <em>verbos=1</em>, <em>cmt=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#evaluate_limits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.evaluate_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates low and high limit of the array, which are used to find bad pixels.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.get_cwd">
<code class="descclassname">GlobalUtils.</code><code class="descname">get_cwd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#get_cwd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.get_cwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns current working directory</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.get_enviroment">
<code class="descclassname">GlobalUtils.</code><code class="descname">get_enviroment</code><span class="sig-paren">(</span><em>env='USER'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#get_enviroment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.get_enviroment" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of specified by string name environment variable</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.get_hostname">
<code class="descclassname">GlobalUtils.</code><code class="descname">get_hostname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#get_hostname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.get_hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns login name</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.get_login">
<code class="descclassname">GlobalUtils.</code><code class="descname">get_login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#get_login"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.get_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns login name</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.history_record">
<code class="descclassname">GlobalUtils.</code><code class="descname">history_record</code><span class="sig-paren">(</span><em>ifname</em>, <em>ctypedir</em>, <em>ctype</em>, <em>ofname</em>, <em>comment=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#history_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.history_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) history record about deployed constants.</p>
<p>Parameters</p>
<ul class="simple">
<li>ifname : str - input file name, e.g.: ‘fname.txt’</li>
<li>ctypedir : str - path to calibtype directory, e.g. ‘/some-path/calib/Jungfrau::CalibV1/CxiEndstation.0:Jungfrau.0/’</li>
<li>ctype : str - calibration type, e.g.: ‘pedestals’</li>
<li>ofname : str - output file name, e.g.: ‘123-end.data’</li>
<li>comment : str - any comment</li>
<li>verbos : bool - verbosity</li>
</ul>
</dd></dl>

<dl class="data">
<dt id="GlobalUtils.list_of_calib_groups">
<code class="descclassname">GlobalUtils.</code><code class="descname">list_of_calib_groups</code><em class="property"> = ('UNDEFINED', 'CsPad::CalibV1', 'CsPad2x2::CalibV1', 'Princeton::CalibV1', 'PNCCD::CalibV1', 'Camera::CalibV1', 'Camera::CalibV1', 'Camera::CalibV1', 'Camera::CalibV1', 'Camera::CalibV1', 'Camera::CalibV1', 'Epix::CalibV1', 'Epix10k::CalibV1', 'Epix100a::CalibV1', 'Camera::CalibV1', 'Andor::CalibV1', 'Acqiris::CalibV1', 'Imp::CalibV1', 'Camera::CalibV1', 'Camera::CalibV1', 'EvrData::CalibV1', 'Camera::CalibV1', 'Timepix::CalibV1', 'Fli::CalibV1', 'Pimax::CalibV1', 'Andor3d::CalibV1', 'Jungfrau::CalibV1', 'Camera::CalibV1')</em><a class="headerlink" href="#GlobalUtils.list_of_calib_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>List of enumetated detector calibration groups</p>
</dd></dl>

<dl class="data">
<dt id="GlobalUtils.list_of_det_names">
<code class="descclassname">GlobalUtils.</code><code class="descname">list_of_det_names</code><em class="property"> = ('UNDEFINED', 'Cspad', 'Cspad2x2', 'Princeton', 'pnCCD', 'Tm6740', 'Opal1000', 'Opal2000', 'Opal4000', 'Opal8000', 'OrcaFl40', 'Epix', 'Epix10k', 'Epix100a', 'Fccd960', 'Andor', 'Acqiris', 'Imp', 'Quartz4A150', 'Rayonix', 'Evr', 'Fccd', 'Timepix', 'Fli', 'Pimax', 'Andor3d', 'Jungfrau', 'Zyla')</em><a class="headerlink" href="#GlobalUtils.list_of_det_names" title="Permalink to this definition">¶</a></dt>
<dd><p>List of enumetated detector names</p>
</dd></dl>

<dl class="data">
<dt id="GlobalUtils.list_of_det_type">
<code class="descclassname">GlobalUtils.</code><code class="descname">list_of_det_type</code><em class="property"> = (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27)</em><a class="headerlink" href="#GlobalUtils.list_of_det_type" title="Permalink to this definition">¶</a></dt>
<dd><p>List of enumetated detector types</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.load_textfile">
<code class="descclassname">GlobalUtils.</code><code class="descname">load_textfile</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#load_textfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.load_textfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns text file as a str object</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.log_rec_on_start">
<code class="descclassname">GlobalUtils.</code><code class="descname">log_rec_on_start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#log_rec_on_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.log_rec_on_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) record containing timestamp, login, host, cwd, and command line</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.mask_edges">
<code class="descclassname">GlobalUtils.</code><code class="descname">mask_edges</code><span class="sig-paren">(</span><em>mask</em>, <em>mrows=1</em>, <em>mcols=1</em>, <em>dtype=&lt;type 'numpy.uint8'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#mask_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.mask_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Return mask with a requested number of row and column pixels masked - set to 0.
mask  : int - n-dimensional (n&gt;1) array with input mask
mrows : int - number of edge rows to mask
mcols : int - number of edge columns to mask</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.mask_neighbors">
<code class="descclassname">GlobalUtils.</code><code class="descname">mask_neighbors</code><span class="sig-paren">(</span><em>mask</em>, <em>allnbrs=True</em>, <em>dtype=&lt;type 'numpy.uint8'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#mask_neighbors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.mask_neighbors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return mask with masked eight neighbor pixels around each 0-bad pixel in input mask.</p>
<p>mask    : int - n-dimensional (n&gt;1) array with input mask
allnbrs : bool - False/True - masks 4/8 neighbor pixels.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.merge_masks">
<code class="descclassname">GlobalUtils.</code><code class="descname">merge_masks</code><span class="sig-paren">(</span><em>mask1=None</em>, <em>mask2=None</em>, <em>dtype=&lt;type 'numpy.uint8'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#merge_masks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.merge_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Merging masks using np.logical_and rule: (0,1,0,1)^(0,0,1,1) = (0,0,0,1)</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.path_to_calib_file">
<code class="descclassname">GlobalUtils.</code><code class="descname">path_to_calib_file</code><span class="sig-paren">(</span><em>ctypedir</em>, <em>ctype</em>, <em>ofname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#path_to_calib_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.path_to_calib_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns path to file wirh calibration constants in the calib store.
e.g. /some-path/calib/Jungfrau::CalibV1/CxiEndstation.0:Jungfrau.0/pedestals/9-end.data
See parameters description in <a class="reference internal" href="#GlobalUtils.history_record" title="GlobalUtils.history_record"><code class="xref py py-meth docutils literal"><span class="pre">history_record()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.path_to_history_file">
<code class="descclassname">GlobalUtils.</code><code class="descname">path_to_history_file</code><span class="sig-paren">(</span><em>ctypedir</em>, <em>ctype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#path_to_history_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.path_to_history_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns path to HISTORY file in the calib store.
e.g. /some-path/calib/Jungfrau::CalibV1/CxiEndstation.0:Jungfrau.0/pedestals/HYSTORY
See parameters description in <a class="reference internal" href="#GlobalUtils.history_record" title="GlobalUtils.history_record"><code class="xref py py-meth docutils literal"><span class="pre">history_record()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.replace">
<code class="descclassname">GlobalUtils.</code><code class="descname">replace</code><span class="sig-paren">(</span><em>template</em>, <em>pattern</em>, <em>subst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#replace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>If pattern in the template replaces it with subst.
Returns str object template with replaced patterns.</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.reshape_nda_to_2d">
<code class="descclassname">GlobalUtils.</code><code class="descname">reshape_nda_to_2d</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#reshape_nda_to_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.reshape_nda_to_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape np.array to 2-d</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.reshape_nda_to_3d">
<code class="descclassname">GlobalUtils.</code><code class="descname">reshape_nda_to_3d</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#reshape_nda_to_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.reshape_nda_to_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape np.array to 3-d</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.save_textfile">
<code class="descclassname">GlobalUtils.</code><code class="descname">save_textfile</code><span class="sig-paren">(</span><em>text</em>, <em>path</em>, <em>mode='w'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#save_textfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.save_textfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves text in file specified by path. mode: ‘w’-write, ‘a’-append</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.shape_nda_to_2d">
<code class="descclassname">GlobalUtils.</code><code class="descname">shape_nda_to_2d</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#shape_nda_to_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.shape_nda_to_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Return shape of np.array to reshape to 2-d</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.shape_nda_to_3d">
<code class="descclassname">GlobalUtils.</code><code class="descname">shape_nda_to_3d</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#shape_nda_to_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.shape_nda_to_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Return shape of np.array to reshape to 3-d</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.str_tstamp">
<code class="descclassname">GlobalUtils.</code><code class="descname">str_tstamp</code><span class="sig-paren">(</span><em>fmt='%Y-%m-%dT%H:%M:%S'</em>, <em>time_sec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#str_tstamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.str_tstamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string timestamp for specified format and time in sec or current time by default</p>
</dd></dl>

<dl class="function">
<dt id="GlobalUtils.string_from_source">
<code class="descclassname">GlobalUtils.</code><code class="descname">string_from_source</code><span class="sig-paren">(</span><em>source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/GlobalUtils.html#string_from_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GlobalUtils.string_from_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string like “CxiDs2.0:Cspad.0” from “Source(‘DetInfo(CxiDs2.0:Cspad.0)’)” or “Source(‘DsaCsPad’)”</p>
</dd></dl>

</div>
<span class="target" id="module-RunProcUtils"></span><dl class="function">
<dt id="RunProcUtils.append_log_file">
<code class="descclassname">RunProcUtils.</code><code class="descname">append_log_file</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em>, <em>runs=[]</em>, <em>verb=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#append_log_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.append_log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends records in the log file for list of (str) runs for specified experiment and process name.</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.arc_file">
<code class="descclassname">RunProcUtils.</code><code class="descname">arc_file</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#arc_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.arc_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) arcive log file name, e.g. ‘/reg/g/psdm/logs/run_proc/pixel_status/CXI/xpptut15-proc-arch.txt’</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.control_file">
<code class="descclassname">RunProcUtils.</code><code class="descname">control_file</code><span class="sig-paren">(</span><em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#control_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.control_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) control file name, e.g. ‘/reg/g/psdm/logs/run_proc/pixel_status/proc_control.txt’</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.dict_exp_run_old">
<code class="descclassname">RunProcUtils.</code><code class="descname">dict_exp_run_old</code><span class="sig-paren">(</span><em>ins='CXI'</em>, <em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#dict_exp_run_old"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.dict_exp_run_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dict {exp:list_of_runs} for specified instrument (=None for all) and procname,
e.g. {‘mfx13016’:[‘0005’,‘0006’], ‘mfx15070’:[‘0003’,‘0004’,‘0005’],…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.exp_run_new">
<code class="descclassname">RunProcUtils.</code><code class="descname">exp_run_new</code><span class="sig-paren">(</span><em>ins='CXI'</em>, <em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#exp_run_new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.exp_run_new" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns new list of tuples (exp,run) for specified instrument (=None for all) and procname,
e.g. [(‘mfx13016’,‘0005’), (‘mfx15070’,‘0008’),…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.exp_run_new_under_control">
<code class="descclassname">RunProcUtils.</code><code class="descname">exp_run_new_under_control</code><span class="sig-paren">(</span><em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#exp_run_new_under_control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.exp_run_new_under_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns new list of tuples (exp,run) for specified procname for experiments from control file,
e.g. [(‘mfx13016’,‘0005’), (‘mfx15070’,‘0008’),…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.exp_run_old">
<code class="descclassname">RunProcUtils.</code><code class="descname">exp_run_old</code><span class="sig-paren">(</span><em>ins='CXI'</em>, <em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#exp_run_old"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.exp_run_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns old list of tuples (exp,run) for specified instrument (=None for all) and procname,
e.g. [(‘mfx13016’,‘0005’), (‘mfx15070’,‘0008’),…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.experiments">
<code class="descclassname">RunProcUtils.</code><code class="descname">experiments</code><span class="sig-paren">(</span><em>ins='CXI'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#experiments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.experiments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of (8,9-char-str) experiment names for specified 3-char (str) instrument name,
or all experiments is ins=None,
e.g. [‘mfxo1916’, ‘mfxn8416’, ‘mfxlq3915’,…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.experiments_under_control">
<code class="descclassname">RunProcUtils.</code><code class="descname">experiments_under_control</code><span class="sig-paren">(</span><em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#experiments_under_control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.experiments_under_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of (str) experiment names from control file.</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.log_file">
<code class="descclassname">RunProcUtils.</code><code class="descname">log_file</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#log_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) log file name, e.g. ‘/reg/g/psdm/logs/run_proc/pixel_status/CXI/xpptut15-proc-runs.txt’</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.move_recs_to_archive">
<code class="descclassname">RunProcUtils.</code><code class="descname">move_recs_to_archive</code><span class="sig-paren">(</span><em>procname</em>, <em>exp</em>, <em>runs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#move_recs_to_archive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.move_recs_to_archive" title="Permalink to this definition">¶</a></dt>
<dd><p>Move expired run records from log file to archive file.</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.msg_to_log">
<code class="descclassname">RunProcUtils.</code><code class="descname">msg_to_log</code><span class="sig-paren">(</span><em>runs=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#msg_to_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.msg_to_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) message to the log file for list of (str) runs.</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.recs_in_log_file">
<code class="descclassname">RunProcUtils.</code><code class="descname">recs_in_log_file</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em>, <em>verb=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#recs_in_log_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.recs_in_log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of (str) records in the log file for specified experiment and process name.
E.g. of one record: ‘0151 2017-10-05T15:19:21’</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.runs_in_log_file">
<code class="descclassname">RunProcUtils.</code><code class="descname">runs_in_log_file</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#runs_in_log_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.runs_in_log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of (4-char str) runs in the log file for specified experiment and process name.
E.g. [‘0059’, ‘0060’,…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.runs_in_xtc_dir">
<code class="descclassname">RunProcUtils.</code><code class="descname">runs_in_xtc_dir</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>verb=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#runs_in_xtc_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.runs_in_xtc_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns sorted list of (str) runs in xtc directory name, e.g. [‘0059’, ‘0060’,…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.runs_new_in_exp">
<code class="descclassname">RunProcUtils.</code><code class="descname">runs_new_in_exp</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em>, <em>verb=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#runs_new_in_exp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.runs_new_in_exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of (4-char str) runs which are found in xtc directory and not yet listed in the log file,
e.g. [‘0059’, ‘0060’,…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.runs_old_in_exp">
<code class="descclassname">RunProcUtils.</code><code class="descname">runs_old_in_exp</code><span class="sig-paren">(</span><em>exp='xpptut15'</em>, <em>procname='pixel_status'</em>, <em>verb=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#runs_old_in_exp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.runs_old_in_exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of (4-char str) runs which are found in the log file and are not listed in xtc directory,
e.g. [‘0059’, ‘0060’,…]</p>
</dd></dl>

<dl class="function">
<dt id="RunProcUtils.xtc_dir">
<code class="descclassname">RunProcUtils.</code><code class="descname">xtc_dir</code><span class="sig-paren">(</span><em>exp='xpptut15'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/RunProcUtils.html#xtc_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#RunProcUtils.xtc_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (str) xtc directory name, e.g. ‘/reg/d/psdm/XPP/xpptut15/xtc’</p>
</dd></dl>

<span class="target" id="module-SubprocUtils"></span><dl class="function">
<dt id="SubprocUtils.subproc">
<code class="descclassname">SubprocUtils.</code><code class="descname">subproc</code><span class="sig-paren">(</span><em>cmd</em>, <em>env=None</em>, <em>shell=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SubprocUtils.html#subproc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#SubprocUtils.subproc" title="Permalink to this definition">¶</a></dt>
<dd><p>e.g., command=’bsub -q psananehq -o log-ls.txt ls -l]
command_seq=[‘bsub’, ‘-q’, cp.batch_queue, ‘-o’, ‘log-ls.txt’, ‘ls -l’]</p>
</dd></dl>

<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          
          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/index.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Mikhail Dubrovin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>